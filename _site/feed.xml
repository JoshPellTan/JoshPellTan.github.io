<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>JoshPell</title>
    <description>æ¬¢è¿æ¥åˆ°æˆ‘çš„ä¸ªäººç½‘ç«™~</description>
    <link>/</link>
    <atom:link href="/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Tue, 15 Aug 2017 12:01:04 +0800</pubDate>
    <lastBuildDate>Tue, 15 Aug 2017 12:01:04 +0800</lastBuildDate>
    <generator>Jekyll v3.1.1</generator>
    
      <item>
        <title>iOS 9 Universal links å®è·µ</title>
        <description>&lt;p&gt;æœ€è¿‘ä¸€ä¸ªå¤šæœˆå…¬å¸é¡¹ç›®UIå¤§æ”¹ï¼Œåšçš„éƒ½æ˜¯å¤§é‡é‡å¤çš„ç®€å•å·¥ä½œï¼Œä¸€æ˜¯æ²¡æ—¶é—´äºŒæ˜¯æ²¡æœ‰ä»€ä¹ˆæ–°çš„æŠ€æœ¯ç‚¹ï¼Œå”¯ä¸€é‡åˆ°çš„æ–°çš„å€¼å¾—å†™ä¸ªå°æ–‡ç« è®°å½•ä¸€ä¸‹çš„å°±æ˜¯è¿™ä¸ªäº†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;universal-links&quot;&gt;Universal linksç®€ä»‹&lt;/h3&gt;
&lt;p&gt;Universal linksæ˜¯è‹¹æœåœ¨WWDC 2015ä¸Šä¸ºiOS 9å®£å¸ƒåŠ å…¥çš„ä¸€ä¸ªæ‰€è°“é€šç”¨é“¾æ¥çš„æ·±å±‚é“¾æ¥ç‰¹æ€§ï¼Œ&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2015/509/&quot;&gt;è§†é¢‘ä»‹ç»&lt;/a&gt;å’Œ&lt;a href=&quot;https://developer.apple.com/library/content/documentation/General/Conceptual/AppSearch/UniversalLinks.html#//apple_ref/doc/uid/TP40016308-CH12-SW1&quot;&gt;å®˜æ–¹è¯´æ˜æ–‡æ¡£&lt;/a&gt;,å®˜æ–¹æè¿°æ˜¯Deep linkï¼Œæ˜¯ç³»ç»Ÿçº§çš„è·³è½¬åŠŸèƒ½ï¼Œé€šè¿‡ä¼ ç»Ÿ HTTP é“¾æ¥æ¥å¯åŠ¨ App, ä½¿ç”¨ç›¸åŒçš„ç½‘å€æ‰“å¼€ç½‘ç«™å’Œ Appã€‚é‡è¦çš„æ˜¯ä¸éœ€è¦ç‰¹åˆ«çš„schemaï¼Œå…¶ä»–Appé˜»æ­¢ä¸äº†è·³è½¬ï¼å¾ˆå¤šAppå‚æ¶å·²ä¹…çš„æµé‡è½¬åŒ–å¯ä»¥å®ç°äº†ï¼&lt;/p&gt;

&lt;h3 id=&quot;section&quot;&gt;æµç¨‹ç®€è¿°&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æœ‰ä¸€ä¸ªä½ å…¬å¸è‡ªå·±çš„ç½‘é¡µï¼ˆç½‘å€éšæ„ï¼Œä¸è·³è½¬æ— å…³ï¼‰ï¼Œç½‘é¡µä¸Šæœ‰ä¸€ä¸ªâ€œæ‰“å¼€Appâ€æŒ‰é’®ï¼Œç‚¹å‡»æ•ˆæœæ˜¯æ‰“å¼€ä¸€ä¸ªé“¾æ¥ï¼ˆéœ€è¦é…ç½®ï¼Œåé¢è¯¦è¿°ï¼‰ï¼Œè‹¥å·²å®‰è£…Appåˆ™ç›´æ¥ä¼šæ‰“å¼€ï¼ˆè‹¹æœç³»ç»Ÿæ“ä½œï¼Œä¸ç”¨ç®¡ï¼‰ï¼Œè‹¥æ²¡æœ‰åˆ™H5å»¶æ—¶åˆ¤æ–­è·³è½¬è‹¹æœå•†åº—ï¼Œç»“æŸã€‚è¿™æ ·ä¸€ä¸ªæµç¨‹å¯¹æ¯”ä½¿ç”¨schemaæ¥æ‰“å¼€Appï¼Œä¸€æ˜¯ç®€åŒ–äº†ç”¨æˆ·çš„æ“ä½œï¼ŒäºŒæ˜¯ä¸ç”¨è·å–åˆå§‹Appçš„æˆæƒï¼Œç®€ç›´æ˜¯å¹¿å¤§ä¸­å°Appè¿è¥è€…çš„ç¦éŸ³å•Š&lt;/p&gt;

&lt;h3 id=&quot;universal-links-1&quot;&gt;Universal linksä½¿ç”¨å’Œé…ç½®&lt;/h3&gt;

&lt;p&gt;æƒ³ä½¿ç”¨Universal linksè¯´éš¾ä¹Ÿä¸éš¾ï¼Œä½†è¯´ç®€å•ä¹Ÿä¸ç®€å•ï¼Œå®ƒçš„ä¸ç®€å•æ˜¯ç”±äºéœ€è¦é…ç½®çš„ä¸œè¥¿æ¯”è¾ƒå¤šï¼Œè€Œä¸”ä¸€æ­¥éƒ½ä¸èƒ½å°‘ï¼Œæ¥ä¸‹æ¥å°±ç»™å¤§å®¶è¯´ä¸€ä¸‹éœ€è¦é…ç½®å“ªäº›ä¸œè¥¿ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;1.ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰ä¸€ä¸ªé€šè¿‡httpsé…ç½®çš„åŸŸåï¼Œè¯ä¹¦æœ€å¥½ä¸è¦è‡ªåˆ¶ï¼Œå°½é‡ä½¿ç”¨ç¬¬ä¸‰æ–¹è¯ä¹¦ï¼Œæµ‹è¯•æ–¹æ³•ï¼šç”¨Safariæ‰“å¼€è¯¥åŸŸåï¼Œå¦‚æœä¸­é—´æ²¡æœ‰è­¦å‘Šæç¤ºèƒ½ç›´æ¥æ‰“å¼€ç½‘å€ï¼Œè¯´æ˜è¯ä¹¦é…ç½®æˆåŠŸ&lt;/code&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;2.ï¼ˆæœåŠ¡å™¨ç«¯ï¼‰ç¼–è¾‘ä¸€ä¸ªJSONå†…å®¹æ ¼å¼çš„æ–‡ä»¶ï¼Œæ”¾åˆ°ä¸Šé¢é…ç½®å¥½çš„åŸŸåå­ç›®å½•ä¸‹ï¼Œè‹¹æœè§„å®šæ˜¯åŸŸåçš„æ ¹ç›®å½•æˆ–è€…æ˜¯well-knownç›®å½•ä¸‹ï¼Œæµ‹è¯•æ–¹æ³•ï¼šæµè§ˆå™¨æ‰“å¼€https://&amp;lt;domain&amp;gt;/apple-app-site-association æˆ–è€… https://&amp;lt;domain&amp;gt;/.well-known/apple-app-site-associationèƒ½çœ‹åˆ°ä½ çš„JSONæ–‡ä»¶çš„å†…å®¹ï¼Œè‹¹æœä¼šåœ¨é€‚å½“çš„æ—¶å€™å»è®¿é—®è¿™ä¸ªæ–‡ä»¶ï¼Œä»¥æ­¤æ¥å†³å®šä½ çš„è·³è½¬èƒ½å¦æ”¯æŒï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;applinks&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;apps&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[],&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;details&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;appID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;9JA89QQLNQ.com.apple.wwdc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;paths&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/wwdc/news/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;/videos/wwdc/2015/*&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;appID&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;ABCD1234.com.apple.wwdc&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
                &lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&quot;paths&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;*&quot;&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
            &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
        &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;
å‚æ•°è¯´æ˜ï¼š&lt;code class=&quot;highlighter-rouge&quot;&gt;&quot;apps&quot;: [],&lt;/code&gt;æ ¼å¼å›ºå®šï¼Œä¸ç”¨ä¿®æ”¹ï¼›&lt;code class=&quot;highlighter-rouge&quot;&gt;details&lt;/code&gt;ï¼šæœ¬åŸŸåæ”¯æŒè·³è½¬çš„appä¿¡æ¯ï¼ˆå¦‚å…¬å¸æ——ä¸‹Appä¸æ­¢ä¸€ä¸ªï¼Œåˆ™éœ€æŒ¨ä¸ªé…ç½®ï¼‰ï¼›&lt;code class=&quot;highlighter-rouge&quot;&gt;appID&lt;/code&gt;:æ ¼å¼ä¸ºâ€œ&lt;code class=&quot;highlighter-rouge&quot;&gt;teamID&lt;/code&gt;. &lt;code class=&quot;highlighter-rouge&quot;&gt;bundle id&lt;/code&gt;â€ï¼ˆæ‰“å¼€è‹¹æœå¼€å‘è€…ä¸­å¿ƒï¼Œç™»é™†è‡ªå·±è´¦å·ï¼Œidentifiers-&amp;gt;App IDs,ç‚¹å‡»è¯¥Appä½¿ç”¨çš„IDå³å¯çœ‹åˆ°ï¼‰ï¼›&lt;code class=&quot;highlighter-rouge&quot;&gt;paths&lt;/code&gt;ï¼šæ”¯æŒè·³è½¬çš„ç½‘å€ç›®å½•ï¼Œâ€œ*â€è¡¨ç¤ºé…ç½®ç½‘å€çš„æ‰€æœ‰å­ç›®å½•éƒ½æ”¯æŒè·³è½¬ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ä¸€æ­¥æœ‰ä¸ª&lt;a href=&quot;https://search.developer.apple.com/appsearch-validation-tool/&quot;&gt;å®˜æ–¹æµ‹è¯•æ–¹æ³•&lt;/a&gt;ï¼Œä½†ä»…åšå‚è€ƒï¼Œå› ä¸ºæˆ‘é…ç½®å¥½Appç«¯å’ŒæœåŠ¡å™¨ç«¯ï¼Œéƒ½èƒ½æ‰“å¼€Appäº†ï¼Œè¿™ä¸ªæµ‹è¯•ç½‘å€è¿˜æ£€æµ‹æˆ‘çš„é…ç½®ç½‘å€æœ‰é—®é¢˜ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;3.ï¼ˆAppç«¯ï¼‰æ‰“å¼€ä½ é¡¹ç›®targets-&amp;gt;Capabilitiesä¸‹çš„Associated Domainså¼€å…³ï¼Œå¹¶å°†ä½ å‰é¢é…ç½®çš„åŸŸåæ·»åŠ åˆ°è¿™é‡Œï¼Œæ”¯æŒæ·»åŠ å¤šä¸ªåŸŸåï¼Œå¦‚å›¾ï¼š&lt;/code&gt;
&lt;img src=&quot;http://cc.cocimg.com/api/uploads/20150902/1441166240882211.png&quot; width=&quot;400&quot; height=&quot;&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;4.ï¼ˆAppç«¯ï¼‰ä»¥ä¸Šä¸œè¥¿é…ç½®å¥½åä¸€å®šä¸è¦å¿˜äº†è¿™ä¸€æ­¥ï¼Œæ›´æ–°Certificatesè¯ä¹¦åˆ°é¡¹ç›®ä¸­ï¼åˆ é™¤åŸæœ‰é’¥åŒ™ä¸²ç®¡ç†ä¸­çš„è¯ä¹¦ï¼Œä¸‹è½½å®‰è£…æ–°çš„è¯ä¹¦&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;5.ï¼ˆAppç«¯ï¼‰è¿™ä¸ªåº”è¯¥å†™åœ¨ç¬¬ä¸€ç‚¹ï¼Œå°±æ˜¯æœ¬åŠŸèƒ½ä»…æ”¯æŒiOS 9 beta 2å’ŒXcode 7 beta 2åŠä»¥ä¸Šç‰ˆæœ¬&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;6.(Appç«¯)å¦‚æœå‰é¢å‡ æ­¥éƒ½åšæ­£ç¡®çš„è¯ï¼Œè¿™æ—¶å€™ä½ å·²ç»èƒ½ä»H5æ‰“å¼€Appäº†ï¼Œè¿™æ—¶å€™å°±éœ€è¦æ¥å®ç°Appç«¯çš„åŠŸèƒ½äº†ï¼Œå¦‚æœéœ€æ±‚æ˜¯æ‰“å¼€Appåä¼šæœ‰ç›¸å…³æ“ä½œï¼Œåˆ™éœ€è¦å®ç°**- (BOOL)application:(UIApplication *)application continueUserActivity:(NSUserActivity *)userActivity restorationHandler:(void (^)(NSArray * _Nullable))restorationHandler**æ–¹æ³•äº†ï¼Œé€šè¿‡ä»£ç **NSURL *url = userActivity.webpageURL**å¯ä»¥è·å–æœ¬æ¬¡è·³è½¬çš„é“¾æ¥ä¿¡æ¯ï¼ŒAppç«¯å¯ä»¥å’Œå…¶çº¦å®šå‚æ•°è¿›è¡Œåç»­æ“ä½œ&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Universal linkså·¥ä½œæµç¨‹ï¼š
&lt;img src=&quot;http://cc.cocimg.com/api/uploads/20150902/1441174097574453.png&quot; width=&quot;400&quot; height=&quot;&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä»¥ä¸Šå‡ æ­¥å°±èƒ½ç¡®ä¿ä½ çš„Appèƒ½åœ¨iOS9ä»¥åçš„ç³»ç»Ÿä¸­æ‰“å¼€äº†ï¼Œenjoy your self!&lt;/p&gt;

&lt;h3 id=&quot;universal-links-2&quot;&gt;Universal linksç¼ºç‚¹&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;1.åªé€‚ç”¨äºiOS 9+ï¼Œå¤§å‹Appæœ‰è®¸å¤šä½ç‰ˆæœ¬ç”¨æˆ·ï¼Œä¸é€‚ç”¨&lt;/code&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;2.æ€»ä¼šè¿›å…¥åˆ°å…ˆå‰Appæ‰€åœ¨çš„é¡µé¢ï¼Œå¦‚æœéœ€æ±‚æ˜¯åœ¨ç‰¹å®šç•Œé¢ï¼Œä¼šéœ€è¦ä¸€äº›é¢å¤–æ“ä½œ&lt;/code&gt;
&lt;code class=&quot;highlighter-rouge&quot;&gt;3.å¿…é¡»æ‹¥æœ‰å¹¶ç»´æŠ¤ä¸€ä¸ªç½‘ç«™ï¼Œè®¸å¤šå°å‹Appæˆ–ä¸ªäººå¼€å‘è€…æ— æ³•è´Ÿæ‹…&lt;/code&gt;&lt;/p&gt;

&lt;h3 id=&quot;section-1&quot;&gt;ç¬¬ä¸‰æ–¹è§£å†³æ–¹æ¡ˆ&lt;/h3&gt;

&lt;p&gt;1.&lt;strong&gt;&lt;a href=&quot;https://hokolinks.com&quot;&gt;HOKO&lt;/a&gt;&lt;/strong&gt;ï¼ˆå¢ƒå¤–æœåŠ¡ä¸Šå•†ï¼‰&lt;/p&gt;

&lt;p&gt;2&lt;strong&gt;&lt;a href=&quot;http://www.magicwindow.cn&quot;&gt;é­”çª—&lt;/a&gt;&lt;/strong&gt;ï¼ˆå¢ƒå†…æœåŠ¡å•†ï¼‰&lt;/p&gt;

</description>
        <pubDate>Mon, 14 Aug 2017 16:08:13 +0800</pubDate>
        <link>/2017/08/iOS-9-Universal-links-%E5%AE%9E%E8%B7%B5/</link>
        <guid isPermaLink="true">/2017/08/iOS-9-Universal-links-%E5%AE%9E%E8%B7%B5/</guid>
        
        <category>Universal links</category>
        
        <category>APPé—´è·³è½¬</category>
        
        <category>Universal links ä»å¾®ä¿¡QQç­‰å…¶ä»–Appè·³è½¬åˆ°ä½ è‡ªå·±APPçš„å®è·µ</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>å¦‚ä½•å°†è‡ªå·±é¡¹ç›®çš„ä»£ç æ–‡æ¡£å¯¼å‡ºä¸ºè‹¹æœæ ·å¼</title>
        <description>&lt;h3 id=&quot;section&quot;&gt;ä»£ç æŠ€æœ¯æ–‡æ¡£&lt;/h3&gt;

&lt;p&gt;ä»£ç æŠ€æœ¯æ–‡æ¡£æ˜¯å¾ˆå¤šå¤§å…¬å¸çš„å¿…åšå·¥ä½œï¼Œè¿™ä¸€æ­¥å¦‚æœåšå¾—å¥½ï¼Œåœ¨åç»­çš„å¼€å‘è¿­ä»£ä¸­ä¼šå°‘å‡ºç°è®¸å¤šbugï¼Œè€Œä¸”ä¸ç®¡å¼€å‘äººå‘˜å¦‚ä½•è¿­ä»£ï¼Œéƒ½èƒ½å¿«é€Ÿåœ°ä¸Šæ‰‹æ–°é¡¹ç›®ï¼Œè¿™æ ·å°±èƒ½æ— å½¢å½“ä¸­é™ä½å…¬å¸çš„æˆæœ¬ã€‚ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥ï¼Œè¿™ä¸ªé“ç†è°éƒ½æ‡‚ã€‚ä½†æ˜¯å¾ˆå¤šå°å…¬å¸æˆ–è€…æ˜¯ç¨‹åºå‘˜å¯èƒ½ä¼šæ€•éº»çƒ¦ï¼Œå¢åŠ å·¥ä½œé‡ï¼Œä¾¿ä¸å»åšè¿™ä¸ªä¸œè¥¿ï¼Œè¿™å°±å¯¼è‡´äº†å¾ˆå¤šå°å…¬å¸ä¸¤ä¸‰ä¸ªæˆ–ä¸‰å››ä¸ªäººå»ç»´æŠ¤ä¸€ä¸ªé¡¹ç›®ï¼Œåœ¨æ¯æ¬¡æ›´æ–°è¿­ä»£çš„æ—¶å€™éƒ½ä¼šå‡ºç°åŒæ ·çš„bugæˆ–è€…é—®é¢˜ï¼Œæˆ–è€…æ˜¯æœ‰äººå‘˜æµåŠ¨çš„æ—¶å€™ï¼Œæ–°å…¥å‘˜å·¥éœ€è¦èŠ±å¤§é‡æ—¶é—´å»é˜…è¯»äº†è§£ä»£ç ï¼ŒåæœŸè¿˜ä¸ä¸€å®šä¼šé¿å…ä¸€äº›è€çš„ä½çº§bugã€‚è¡¨é¢ä¸ŠèŠ‚çœäº†æ–‡æ¡£ç¼–å†™çš„æ—¶é—´ï¼Œä½†åç»­ä¸ºæ­¤ä»˜å‡ºä»£ä»·çš„æ—¶é—´æ¯”ç¼–å†™æ—¶é—´å¤šè®¸å¤šã€‚è¿˜æœ‰ä¸€ç§æƒ…å†µæ˜¯ä¸Šé¢è‹±æ–‡æ–‡ç« ä¸­æåˆ°çš„ï¼Œå°±æ˜¯ä½ å¦‚æœåœ¨App Storeä¸Šä¸Šçº¿äº†ä¸€ä¸ªAPPï¼Œç„¶åä½ éœ€è¦åšå…¶ä»–å·¥ä½œï¼Œå‡ ä¸ªæœˆåä½ éœ€è¦ç»™è¯¥APPæ›´æ–°ä¸€ä¸‹ç‰ˆæœ¬ï¼Œé‚£æ—¶å€™ä½ å†çœ‹ä»£ç æƒ³ä¸‹æ‰‹ï¼Œè‚¯å®šä»¥ä¸ºæ˜¯åˆ«äººå†™çš„ï¼Œä½†å¦‚æœæœ‰æ–‡æ¡£ï¼Œå·¥ä½œè‚¯å®šäº‹åŠåŠŸå€äº†ã€‚&lt;/p&gt;

&lt;p&gt;æœ¬æ–‡å°†å±•ç¤ºå¦‚ä½•ä¸ºä¸€ä¸ªé¡¹ç›®åšä¸€ä¸ªåŸºäºwebçš„ä»£ç æ–‡æ¡£ã€‚&lt;/p&gt;

&lt;h3 id=&quot;beging&quot;&gt;beging&lt;/h3&gt;

&lt;p&gt;æ–°å»ºä¸€ä¸ªocå·¥ç¨‹ï¼Œå·¥ç¨‹ååé¢ä¼šç”¨åˆ°ï¼Œ&lt;a href=&quot;https://github.com/JoshPellTan/TJJazzyDocumentForOC&quot;&gt;DEMO&lt;/a&gt;åœ°å€&lt;/p&gt;

&lt;h3 id=&quot;section-1&quot;&gt;æ–‡æ¡£æ ‡æ³¨&lt;/h3&gt;

&lt;p&gt;æœ€ç®€å•çš„æ ‡æ³¨å°±æ˜¯åŒæ–œæ ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//æ ‡æ³¨è¯´æ˜çš„å†…å®¹
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯å¤§å®¶æœ€ç»å¸¸ç”¨çš„ï¼Œç®€å•æ–¹ä¾¿ã€‚å¦‚æœè¯´å¯¹äºæ–‡æ¡£æˆ–è€…æ•´ä¸ªé¡¹ç›®è€Œè¨€ï¼Œå°±æ²¡æœ‰å¤ªå¤§ç”¨å¤„äº†ï¼Œåªæ˜¯è¯´ä½ å»ä»”ç»†çœ‹æŸä¸ªç±»çš„æ—¶å€™ä¼šå¯¹ä½ çš„ç†è§£æœ‰å¸®åŠ©ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œè¯´çš„ä»£ç æ–‡æ¡£æ˜¯æŒ‡ä½¿ç”¨Xcodeèƒ½å¾ˆå¥½çš„è¯†åˆ«ï¼Œçœ‹æ–‡æ¡£çš„äººä¹Ÿèƒ½å¿«é€Ÿç†è§£ï¼ŒXcodeæ˜¯æ”¯æŒç¼–ç¨‹è€…ä½¿ç”¨ç‰¹å®šçš„å…³é”®å­—ï¼Œä¹Ÿå«æ ‡è®°ï¼Œæ¥å¯¹ä»£ç è¿›è¡Œæ ‡æ³¨çš„ã€‚é«˜æ•ˆçš„æ ‡æ³¨å‡ ä¸ªåŸºæœ¬è¦æ±‚å¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;1.Utilitiesé¢æ¿çš„Quick Help Inspectorä¼šæ˜¾ç¤ºæ ‡æ³¨
2.å½“ä½ æŒ‰ä¸‹Optioné”®ç„¶åç‚¹å‡»å¤‡æ³¨çš„æ–¹æ³•ã€ç±»æˆ–å±æ€§åæ—¶å¼¹å‡ºçš„å¸®åŠ©èœå• Help Popup é‡Œ
3.åœ¨ä»£ç æç¤ºçš„å¼¹æ¡†é‡Œé¢ä¼šæ˜¾ç¤ºæ³¨é‡Šä¿¡æ¯&lt;/p&gt;

&lt;p&gt;ä½†åœ¨Xcodeä¸­ä½¿ç”¨ (âŒ¥ Option + âŒ˜ Command + /)çš„ç»„åˆé”®å¿«é€Ÿæ³¨é‡Šï¼Œæœ‰å‚æ•°æˆ–è€…è¿”å›å€¼çš„Xcodeä¼šè‡ªåŠ¨è¯†åˆ«å¹¶å¸®ä½ æ·»åŠ @paramæˆ–@returnå…³é”®å­—ï¼Œæœ€ç‰›é€¼çš„æ˜¯æ³¨é‡Šæ”¯æŒmarkdownè¯­æ³•ï¼Œä½ æƒ³æ€ä¹ˆæè¿°å°±æ€ä¹ˆæè¿°ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://pic.yupoo.com/joshpell/GxnrXGtE/tOArP.png&quot; width=&quot;400&quot; height=&quot;&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å†ä»‹ç»å…¶ä»–ä¸¤ä¸ªå…³é”®å­—&lt;code class=&quot;highlighter-rouge&quot;&gt;@code ... @endcode&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;@remark&lt;/code&gt;ï¼Œå‰è€…æ˜¯ä»£ç æ ‡ç­¾ï¼Œå¯ä»¥æ”¾ä¸€å°æ®µä»£ç ç”¨äºæç¤ºç­‰ï¼Œåè€…æ˜¯åŠ ç²—é‡ç‚¹æç¤ºã€‚ä»–ä»¬åœ¨ä½ ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;option&lt;/code&gt;ç‚¹å‡»æŸ¥çœ‹çš„æ—¶å€™æ‰ä¼šçœ‹åˆ°ï¼Œéƒ½æ˜¯è·Ÿåœ¨å±æ€§è¯´æ˜æˆ–è€…æ–¹æ³•è¯´æ˜åé¢ã€‚&lt;/p&gt;

&lt;p&gt;åŠ ä¸Šè¿™äº›å…³é”®è¯åï¼Œåœ¨ä½¿ç”¨è¯¥æ–¹æ³•æ—¶ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;option&lt;/code&gt;åŠ å•å‡»è¯¥æ–¹æ³•ä½ å°±èƒ½çœ‹åˆ°å¦‚ä¸‹å›¾çš„æ³¨é‡Šäº†&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://pic.yupoo.com/joshpell/GxnrY4oN/aGNAZ.png&quot; width=&quot;400&quot; height=&quot;&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå¿«é€Ÿåˆ†äº«å…¶ä»–ç±»å‹çš„æ–‡æ¡£æ³¨é‡Šå…³é”®è¯ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;@class&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;åé¢è·Ÿç±»åï¼Œç±»çš„æè¿°&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;interface&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;åŒä¸Š&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@protocol&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;åŒä¸Šï¼Œéœ€è·Ÿåè®®åï¼Œåè®®çš„æè¿°&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;superclass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æœ¬ç±»çš„çˆ¶ç±»&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;@classdesign&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;æœ¬ç±»ä½¿ç”¨ä¸­éœ€è¦ç‰¹åˆ«æ³¨æ„çš„äº‹é¡¹ï¼Œå¦‚æ˜¯å•ä¾‹ç±»&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;@coclass&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;err&quot;&gt;åˆä½œå¼€å‘çš„ç±»&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;æšä¸¾è¿™é‡Œå°±ä¸è®²äº†ï¼Œå»çœ‹&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;demo&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;å§&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;err&quot;&gt;å…¶ä»–è¿˜æœ‰ä¸€äº›æœªæ¶‰åŠçš„æ³¨é‡Šå¸Œæœ›è¯»è€…ä¹Ÿå‘æ˜å‘æ˜ï¼Œå¹¶å‘Šè¯‰æˆ‘ä¸€ä¸‹ï¼Œå…±åŒå­¦ä¹ &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;web&quot;&gt;å¯¼å‡ºä¸ºåŸºäºwebæ ·å¼çš„ä»£ç æ–‡æ¡£&lt;/h3&gt;

&lt;p&gt;1.é¦–å…ˆæ˜¯å®‰è£…jazzyï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo gem install jazzy
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å…¥å¯†ç åç­‰å¾…å®‰è£…æˆåŠŸï¼Œå¦‚æœå®‰è£…ä¸æˆåŠŸï¼Œä½ å°±å¾—å»æŸ¥æŸ¥gemç‰ˆæœ¬æˆ–rubyç¯å¢ƒäº†ï¼Œè‡ªå·±googleã€‚&lt;/p&gt;

&lt;p&gt;2.ä½¿ç”¨&lt;/p&gt;

&lt;p&gt;å®‰è£…æˆåŠŸåcdåˆ°æ‰€éœ€å·¥ç¨‹ç›®å½•ä¸‹ï¼ŒæŒ‰é¡ºåºè¾“å…¥ä»¥ä¸‹ä»£ç ï¼Œé€‰å¡«è¡¨ç¤ºä¸æ˜¯å¿…é¡»è¾“å…¥ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jazzy \
 --objc \
 --author Joshpellï¼ˆé€‰å¡«ï¼‰ \
 --author_url ä½ çš„ä¸ªäººç½‘ç«™åœ°å€ï¼ˆé€‰å¡«ï¼‰ \
 --module-version 1.0.0ï¼ˆé€‰å¡«ï¼‰ \
 --umbrella-header PrefixHeader.pchï¼ˆå°†ä½ çš„æ‰€æœ‰éœ€è¦æ–‡æ¡£åŒ–çš„å¤´æ–‡ä»¶éƒ½æ”¾pchæ–‡ä»¶ä¸­ï¼Œè¿™é‡Œpchæ–‡ä»¶æ˜¯ç›¸å¯¹è·¯å¾„ï¼‰ \
 --framework-root . \
 --output ï¼ˆæ–‡æ¡£è¾“å‡ºç›¸å¯¹è·¯å¾„ï¼Œä¸€èˆ¬æ˜¯å·¥ç¨‹æ–‡ä»¶å¤¹æ–°å»ºä¸€ä¸ªdocsï¼šå·¥ç¨‹ç›¸å¯¹è·¯å¾„/docsï¼‰ 
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å…¥å®Œæˆï¼Œå›è½¦ï¼Œç­‰å¾…ç‰‡åˆ»å³å¯ã€‚
æˆåŠŸåå·¥ç¨‹æ–‡ä»¶å¤¹ä¼šå¤šä¸€ä¸ªdocsæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€index.htmlå°±å¯ä»¥æµè§ˆä½ çš„ä»£ç æ–‡æ¡£äº†ï¼Œå¦‚å›¾ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://pic.yupoo.com/joshpell/GxnrXN6O/dIkqQ.png&quot; width=&quot;400&quot; height=&quot;&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://pic.yupoo.com/joshpell/GxnrXKfv/CqPas.png&quot; width=&quot;400&quot; height=&quot;&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;jazzyé»˜è®¤æ”¯æŒswiftï¼Œå¦‚æœä½ æ˜¯swifté¡¹ç›®ï¼Œæ­å–œä½ äº†ï¼Œcdåˆ°å·¥ç¨‹ç›®å½•ä¸‹ï¼Œä¸€è¡Œä»£ç æå®š(æ„Ÿè§‰OCå—åˆ°äº†æ­§è§†ã€‚ã€‚ã€‚)ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jazzy --min-acl internal
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœä½ æ˜¯ç‰¹å®šç‰ˆæœ¬çš„swiftï¼Œå¯èƒ½ä¼šçœ‹ä¸åˆ°jazzyè¾“å‡ºï¼Œå°±åªèƒ½ç”¨ç‰¹å®šç‰ˆæœ¬çš„å‘½ä»¤è¾“å‡ºï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jazzy --swift-version x.x.x --min-acl internal--
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœä½ æƒ³åƒOCä¸€æ ·åŠ å…¥æ›´è¯¦ç»†çš„æ–‡æ¡£æè¿°ï¼Œå‚è€ƒä¸‹é¢å‘½ä»¤ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;jazzy \
  --clean \
  --author Realm \
  --author_url https://realm.io \
  --github_url https://github.com/realm/realm-cocoa \
  --github-file-prefix https://github.com/realm/realm-cocoa/tree/v0.96.2 \
  --module-version 0.96.2 \
  --xcodebuild-arguments -scheme,RealmSwift \
  --module RealmSwift \
  --root-url https://realm.io/docs/swift/0.96.2/api/ \
  --output docs/swift_output \
  --theme docs/themes
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æœ‰ä¸€ç‚¹æ˜¯éå¸¸ç‰›é€¼çš„ï¼Œä½ å¯¼å‡ºçš„æ–‡æ¡£å®ƒä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªswiftä»£ç ç‰ˆæœ¬çš„å‚ç…§ï¼
&lt;a href=&quot;https://github.com/JoshPellTan/TJJazzyDocumentForOC&quot;&gt;DEMO&lt;/a&gt;åœ°å€ï¼Œå¦‚æœè§‰å¾—å¯¹ä½ æœ‰å¸®åŠ©åˆ«å¿˜äº†starä¸€ä¸ªï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ï¼&lt;/p&gt;

&lt;p&gt;å‚è€ƒ&lt;a href=&quot;http://www.appcoda.com/documenting-source-code-in-xcode/#disqus_thread&quot;&gt;Documenting Your Objective-C and Swift Code in Xcode with HeaderDoc and Doxygen&lt;/a&gt;&lt;/p&gt;
</description>
        <pubDate>Wed, 21 Jun 2017 16:08:13 +0800</pubDate>
        <link>/2017/06/%E5%A6%82%E4%BD%95%E5%B0%86%E8%87%AA%E5%B7%B1%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%BB%A3%E7%A0%81%E6%96%87%E6%A1%A3%E5%AF%BC%E5%87%BA%E4%B8%BA%E8%8B%B9%E6%9E%9C%E6%A0%B7%E5%BC%8F/</link>
        <guid isPermaLink="true">/2017/06/%E5%A6%82%E4%BD%95%E5%B0%86%E8%87%AA%E5%B7%B1%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%BB%A3%E7%A0%81%E6%96%87%E6%A1%A3%E5%AF%BC%E5%87%BA%E4%B8%BA%E8%8B%B9%E6%9E%9C%E6%A0%B7%E5%BC%8F/</guid>
        
        <category>æ–‡æ¡£</category>
        
        <category>å¦‚ä½•å°†è‡ªå·±é¡¹ç›®çš„ä»£ç æ–‡æ¡£å¯¼å‡ºä¸ºè‹¹æœæ ·å¼ï¼ˆæœ¬æ–‡ä»¥OCä¸ºä¾‹ï¼‰</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>gifå›¾ç‰‡åˆ¶ä½œç›¸å…³</title>
        <description>&lt;p&gt;ä»Šå¹´æ˜¯GIFå›¾ç‰‡è¯ç”Ÿ30å‘¨å¹´ï¼Œè€Œä¸”ä¸€ç›´å¯¹iOSçš„GIFå›¾ç‰‡æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œå‰ä¸¤å¤©å°±èŠ±äº†ç‚¹æ—¶é—´ç ”ç©¶äº†ä¸€ä¸‹ï¼Œåœ¨æ­¤è·Ÿå¤§å®¶åˆ†äº«ï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ï¼
å¤§å®¶ä¹Ÿå¯ä»¥ç›´æ¥çœ‹&lt;a href=&quot;https://github.com/JoshPellTan/TJGifMaker&quot;&gt;DEMO&lt;/a&gt;ï¼Œé‡Œé¢åœ¨å…³é”®åœ°æ–¹éƒ½æœ‰æ³¨é‡Šã€‚&lt;/p&gt;

&lt;h3 id=&quot;gif&quot;&gt;gifå›¾ç‰‡æœ¬è´¨&lt;/h3&gt;
&lt;p&gt;GIFå›¾ç‰‡å…¶å®å’Œjpgå›¾ç‰‡ä¸€æ ·ï¼Œæ˜¯ä¸€ç§æµè¡Œçš„å›¾å½¢æ–‡ä»¶æ ¼å¼ã€‚ä½†å¤§å®¶ä¸è¦ä»¥ä¸ºGIFéƒ½æ˜¯åŠ¨å›¾ï¼Œå®ƒä¹Ÿæ˜¯æœ‰é™æ€çš„ï¼Œåªä¸è¿‡æˆ‘ä»¬é€šå¸¸çœ‹åˆ°çš„éƒ½æ˜¯åŠ¨çš„å›¾ç‰‡ï¼Œæ‰€ä»¥ä¸‹æ„è¯†åœ°äººä¸ºGIFéƒ½æ˜¯åŠ¨å›¾ã€‚&lt;/p&gt;

&lt;h3 id=&quot;gif-1&quot;&gt;gifåŠ¨å›¾&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬ä¸»è¦æ¥ç ”ç©¶GIFåŠ¨å›¾ï¼Œå…¶å®å®ƒå°±æ˜¯ä¸€ä¸ªå›¾ç‰‡è¿ç»­æ’­æ”¾çš„æ•ˆæœè€Œå·²ï¼Œåªä¸è¿‡è¿™ä¸æ˜¯æˆ‘ä»¬æ‰‹åŠ¨æ¥å®ç°çš„ï¼Œå„ä¸ªå¹³å°å·²ç»å¯¹å®ƒè¿›è¡Œäº†é€‚é…ï¼Œåªè¦æ˜¯åŠ¨å›¾å®ƒå°±èƒ½åŠ¨èµ·æ¥è€Œå·²ã€‚tomçŒ«ä¸çŸ¥å¤§å®¶ç©è¿‡æ²¡æœ‰ï¼Œå®ƒå°±ç”¨çš„æ˜¯è‡ªå·±æ‰‹åŠ¨å±•ç¤ºå¤šå¼ è¿ç¯å›¾ç‰‡çš„æ–¹æ³•æ¥å®ç°çš„åŠ¨ç”»ã€‚&lt;/p&gt;

&lt;h3 id=&quot;gif-2&quot;&gt;gifåŠ¨å›¾åˆ¶ä½œ&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œæä¾›ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æ˜¯ååº•å±‚ä¸€ç‚¹éœ€è¦ä½¿ç”¨&lt;code class=&quot;highlighter-rouge&quot;&gt;Core&lt;/code&gt;æ¡†æ¶çš„æ–¹æ³•ï¼Œå¦ä¸€ç§æ˜¯è¯»&lt;code class=&quot;highlighter-rouge&quot;&gt;SDWebImage&lt;/code&gt;æºç æ‰¾åˆ°çš„è‹¹æœå°è£…å¥½çš„æ–¹æ³•.&lt;/p&gt;

&lt;p&gt;1.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    //åˆ›å»ºgifè·¯
    NSURL * gifPath = [self gifPathURL];

    //å›¾åƒç›®æ ‡
    CGImageDestinationRef destination = CGImageDestinationCreateWithURL((__bridge CFURLRef)gifPath, kUTTypeGIF, imagePathArray.count, NULL);
    
    //gifè®¾ç½®
    NSDictionary *fileProperties = @{
                                     (__bridge id)kCGImagePropertyGIFDictionary:
                                         @{(__bridge id)kCGImagePropertyGIFLoopCount: @0},
                                     (NSString*)kCGImagePropertyGIFHasGlobalColorMap:[NSNumber numberWithBool:YES],
                                     (NSString *)kCGImagePropertyColorModel:(NSString *)kCGImagePropertyColorModelRGB,
                                     (NSString*)kCGImagePropertyDepth:[NSNumber numberWithInt:8]};
    //a float (not double!) in seconds, rounded to centiseconds in the GIF data
    NSDictionary *frameProperties = @{
                                      (__bridge id)kCGImagePropertyGIFDictionary:
                                          @{(__bridge id)kCGImagePropertyGIFDelayTime: [NSNumber numberWithFloat:duration]}};
    
    CGImageDestinationSetProperties(destination, (__bridge CFDictionaryRef)fileProperties);
    
    //åˆæˆgif
    for (UIImage *image in imagePathArray)
    {

        CGImageDestinationAddImage(destination, image.CGImage, (__bridge CFDictionaryRef)frameProperties);
    }
    
    CGImageDestinationSetProperties(destination, (__bridge CFDictionaryRef)frameProperties);
    if (!CGImageDestinationFinalize(destination)) {
        NSLog(@&quot;failed to finalize image destination&quot;);
    }
    
    CFRelease(destination);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;2.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;UIImage *animatedImage;
    CGFloat totalTime;
    if (!duration) {
        
        totalTime = (3.0f / 10.0f) * imageArr.count;
    }else{
     
        duration = duration * imageArr.count;
    }
    
    animatedImage = [UIImage animatedImageWithImages:imageArr duration:duration];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;gif-3&quot;&gt;gifå›¾ç‰‡åˆ†è§£&lt;/h3&gt;
&lt;p&gt;GIFåŠ¨å›¾æ˜¯å¤šå¼ å›¾ç‰‡åˆæˆçš„ï¼Œå½“ç„¶ä¹Ÿæœ‰æ–¹æ³•å°†å…¶ä¸­çš„å›¾ç‰‡ä¸€å¼ ä¸€å¼ åˆ†è§£å‡ºæ¥ï¼Œæ³¨é‡Šæ¯”è¾ƒè¯¦ç»†ï¼Œå°±ä¸å¤šè¯´äº†ã€‚ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//ç”¨äºä¿å­˜æ‰€æœ‰å›¾ç‰‡
NSMutableArray *imgObjects = [NSMutableArray array];

//1.gifè½¬æ¢æˆdata
NSData *gifData=[NSData dataWithContentsOfFile:gifPath];

//2.é€šè¿‡dataè·å–imageçš„æ•°æ®æº
CGImageSourceRef source =CGImageSourceCreateWithData((CFDataRef)gifData, NULL);

//3.è·å–gifå¸§æ•°
size_t count = CGImageSourceGetCount(source);
for (int i=0; i&amp;lt;count; i++) {
    
//4.è·å–å•å¸§å›¾ç‰‡
CGImageRef imageRef = CGImageSourceCreateImageAtIndex(source, i, NULL);
    
//5.æ ¹æ®CGImageRefè·å–å›¾ç‰‡
//[UIScreen mainScreen].scale    æ˜¯è®¡ç®—å±å¹•åˆ†è¾¨ç‡çš„
//UIImageOrientationUp           æŒ‡å®šæ–°çš„å›¾åƒçš„ç»˜åˆ¶æ–¹å‘
UIImage *image = [UIImage imageWithCGImage:imageRef scale:[UIScreen mainScreen].scale orientation:UIImageOrientationUp];
    
//6.é‡Šæ”¾CGImageRefå¯¹è±¡
CGImageRelease(imageRef);

[imgObjects addObject:image];
//é‡Šæ”¾source
CFRelease(source);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;giftips&quot;&gt;gifä½¿ç”¨tips&lt;/h3&gt;

&lt;p&gt;GIFåŠ¨å›¾çš„åˆæˆå’Œåˆ†è§£æ¯”è¾ƒç®€å•ï¼Œä½†ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šæœ‰ä¸€äº›å°é—®é¢˜ï¼Œæ¯”å¦‚ä½ æƒ³æŠŠåˆ¶ä½œçš„GIFæ”¾åˆ°å¾®ä¿¡ä¸­è·Ÿå¥½å‹ç§€ä¸€ä¸‹ï¼Œé‚£ä¹ˆä½ å°±å¿…é¡»è¦æ§åˆ¶GIFå›¾ç‰‡çš„å¤§å°å’Œè´¨é‡äº†ï¼Œå¦åˆ™ä¼šå¤±è´¥ã€‚è¿˜æœ‰å¦‚ä½•ç›´æ¥ç”¨è§†é¢‘åˆ¶ä½œGIFï¼Œå–è§†é¢‘ä¸­çš„å¸§å›¾ç‰‡æ‹¿æ¥åˆæˆå³å¯ï¼Œå¦‚ä½•å–è§†é¢‘å›¾ç‰‡æˆ‘åœ¨&lt;a href=&quot;https://joshpelltan.github.io/2017/03/ä»¿å¾®ä¿¡æœ‹å‹åœˆè§†é¢‘å‰ªåˆ‡åŠŸèƒ½/&quot;&gt;ä»¿å¾®ä¿¡æœ‹å‹åœˆè§†é¢‘å‰ªåˆ‡åŠŸèƒ½&lt;/a&gt;å·²ç»è®²è¿‡ã€‚æœ¬&lt;a href=&quot;https://github.com/JoshPellTan/TJGifMaker&quot;&gt;DEMO&lt;/a&gt;å®ç°äº†ç…§ç‰‡é€‰å–è½¬GIFã€è§†é¢‘é€‰å–æˆ–æ‹æ‘„è½¬GIFã€GIFåˆ†è§£ä¸ºå›¾ç‰‡ç­‰åŠŸèƒ½ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ä¸‹è½½çœ‹ä¸€ä¸‹ï¼Œè§‰å¾—ä¸é”™æˆ–å¯¹æ‚¨æœ‰å¸®åŠ©çš„è¯è¯·&lt;a href=&quot;https://joshpelltan.github.io/2017/03/ä»¿å¾®ä¿¡æœ‹å‹åœˆè§†é¢‘å‰ªåˆ‡åŠŸèƒ½/&quot;&gt;star&lt;/a&gt;ä¸€ä¸ª!!!&lt;/p&gt;

&lt;p&gt;å¦‚æœ‰ä¸è¶³æˆ–ç¼ºé™·æ•¬è¯·æŒ‡æ­£ï¼Œå…±åŒå­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ï¼&lt;/p&gt;

</description>
        <pubDate>Mon, 19 Jun 2017 16:08:13 +0800</pubDate>
        <link>/2017/06/gif%E5%9B%BE%E7%89%87%E5%88%B6%E4%BD%9C%E7%9B%B8%E5%85%B3/</link>
        <guid isPermaLink="true">/2017/06/gif%E5%9B%BE%E7%89%87%E5%88%B6%E4%BD%9C%E7%9B%B8%E5%85%B3/</guid>
        
        <category>gif</category>
        
        <category>gifå›¾ç‰‡åˆ¶ä½œç›¸å…³</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>è‡ªå®šä¹‰è¡¨è§†å›¾åˆ·æ–°å’ŒåŠ è½½æ§ä»¶</title>
        <description>&lt;p&gt;å¬ä¼ è¨€è¯´å…¬å¸å‡†å¤‡ä½¿ç”¨è‡ªå®šä¹‰çš„ä¸Šæ‹‰å’Œä¸‹æ‹‰æ§ä»¶ï¼Œä»¥å‰ç ”ç©¶è¿‡ï¼Œä½†æ²¡æœ‰ç”¨åˆ°å®é™…é¡¹ç›®ä¸­ï¼Œä¸ç®¡ä¼ è¨€æ˜¯çœŸæ˜¯å‡ï¼Œé‡æ–°å­¦ä¹ ï¼Œç»§ç»­è¿›æ­¥ï¼è¿™é‡Œä¹Ÿè´´å‡ºæˆ‘å†™çš„&lt;a href=&quot;https://github.com/JoshPellTan/TJRefresh&quot;&gt;DEMO&lt;/a&gt;ï¼Œæ¬¢è¿ä½¿ç”¨å’ŒStarï¼&lt;/p&gt;

&lt;p&gt;åˆ·æ–°å’ŒåŠ è½½æ§ä»¶åŸç†æ˜¯ä¸€æ ·ï¼Œè¿™é‡Œå°±åªè®²åˆ·æ–°æ§ä»¶ï¼Œæˆ‘ä»¬å…ˆä¸å»ç ”ç©¶æ•ˆæœï¼Œå…ˆæ¥åˆ†æä¸€ä¸‹åŠŸèƒ½å®ç°ï¼Œä¸€ä¸ªå¸¸ç”¨çš„åˆ·æ–°æ§ä»¶å·¥ä½œåˆ†ä»¥ä¸‹å‡ æ­¥ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.æ‹–åŠ¨è¡¨è§†å›¾ä¸‹æ‹‰ï¼Œæ§ä»¶è·Ÿéšæ»‘åŠ¨è§†å›¾æ…¢æ…¢å‡ºç°&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;2.æ»‘åŠ¨åˆ°é™å®šè·ç¦»ï¼Œç›´æ¥æ¾æ‰‹å°±è§¦å‘åˆ·æ–°åŠ¨ä½œï¼Œå¼€å§‹åˆ·æ–°ï¼Œåˆ·æ–°æ•ˆæœåœç•™é¡¶ç«¯ï¼›è‹¥æœªæ¾æ‰‹ç»§ç»­æ»‘åŠ¨åˆ°é™å®šè·ç¦»ä»¥å†…ï¼Œä¸æ‰§è¡Œæ“ä½œ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;3.åˆ·æ–°å®Œæˆï¼Œå»æ‰åˆ·æ–°æ•ˆæœï¼Œè§†å›¾æ¢å¤åŸä½&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h3 id=&quot;section&quot;&gt;æ·»åŠ æ§ä»¶åˆ°æ¯ä¸ªæ»‘åŠ¨è§†å›¾&lt;/h3&gt;

&lt;p&gt;é¦–å…ˆå¦‚æœæ˜¯ç»™ä¸€ä¸ªæˆç†Ÿçš„é¡¹ç›®åŠ ä¸Šåˆ·æ–°æ§ä»¶ï¼Œä¸å¯èƒ½åœ¨æ¯ä¸ªæœ‰æ»‘åŠ¨è§†å›¾çš„ç±»ä¸­éƒ½å»æ·»åŠ åˆ·æ–°æ§ä»¶ï¼Œæ€ä¹ˆåŠå‘¢ï¼Ÿæ»‘åŠ¨è§†å›¾éƒ½æœ‰ä¸ªå…±åŒç‚¹ï¼Œéƒ½ç»§æ‰¿è‡ª&lt;code class=&quot;highlighter-rouge&quot;&gt;UIScroolView&lt;/code&gt;ï¼Œæ‰€ä»¥è¿™é‡Œå’±ä»¬é‡‡ç”¨ç»™&lt;code class=&quot;highlighter-rouge&quot;&gt;UIScroolView&lt;/code&gt;ç±»æ–°å»ºä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;TJRefresher&lt;/code&gt;çš„åˆ†ç±»ï¼Œå†ç»™åˆ†ç±»æ·»åŠ å’±ä»¬éœ€è¦çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;header&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;footer&lt;/code&gt;å±æ€§ï¼Œå†åœ¨æˆ‘ä»¬éœ€è¦çš„æ»‘åŠ¨è§†å›¾ç±»ä¸­è°ƒç”¨è¿™ä¸¤ä¸ªå±æ€§å³å¯ã€‚ä½†æ˜¯åˆ†ç±»ä¸­æ˜¯ä¸èƒ½ç›´æ¥æ·»åŠ å±æ€§çš„ï¼Œå’‹åŠï¼Œç›´æ¥ä¸è¡Œæ¥é—´æ¥å‘—ï¼Œè¿™é‡Œå°±è¦ç”¨åˆ°è¿è¡Œæ—¶äº†ï¼Œå‰é¢è®²è¿‡&lt;a href=&quot;https://joshpelltan.github.io/2016/12/RunTimeåŠ¨æ€æ·»åŠ æ–¹æ³•å’Œå±æ€§/&quot;&gt;å¦‚ä½•åŠ¨æ€æ·»åŠ å±æ€§&lt;/a&gt;ï¼Œè¿™é‡Œä¸å†ç»†è®²ã€‚ä¸Šä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;static const void *TJRefreshHeaderKey = &amp;amp;TJRefreshHeaderKey;

- (void)setHeader:(TJRefreshHeader *)header {
    
    if (self.header != header) {
        [self.header removeFromSuperview];
        [self insertSubview:header atIndex:0];
        
    }
    objc_setAssociatedObject(self, TJRefreshHeaderKey, header, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (TJRefreshHeader *)header {
    return objc_getAssociatedObject(self, &amp;amp;TJRefreshHeaderKey);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ç”¨çš„æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;insertSubview: atIndex:&lt;/code&gt;æ–¹æ³•è€Œä¸æ˜¯&lt;code class=&quot;highlighter-rouge&quot;&gt;addSubview:&lt;/code&gt;ï¼Œä»–ä»¬çš„åŒºåˆ«æ˜¯å‰è€…æ˜¯å°†è§†å›¾æ’å…¥åŒä¸€ä¸ªå±‚çº§ï¼Œå¹¶ä¸”å¯ä»¥æ’é˜Ÿï¼Œè€Œåè€…åªèƒ½æ˜¯ä¸€å±‚ä¸€å±‚å¾€ä¸Šå ã€‚å½“ä¸€ä¸ªæ»‘åŠ¨è§†å›¾åŒæ—¶æ·»åŠ åˆ·æ–°å’ŒåŠ è½½æ§ä»¶æ—¶ï¼Œå‰è€…å¯ä»¥ä¿è¯ä»–ä»¬æ˜¯åœ¨ä¸€ä¸ªè§†å›¾å±‚çº§ï¼Œæ–¹ä¾¿ç»Ÿä¸€å¤„ç†ã€‚&lt;/p&gt;

&lt;h3 id=&quot;section-1&quot;&gt;ç›‘å¬æ»‘åŠ¨è§†å›¾ï¼Œæ”¹å˜æ§ä»¶çŠ¶æ€&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œéœ€è¦ä½¿ç”¨KVOç›‘å¬æ»‘åŠ¨è§†å›¾çš„æ»‘åŠ¨è·ç¦»ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼Œä¸€ä¸ªæ˜¯æ”¾åœ¨ä¸Šé¢çš„åˆ†ç±»ä¸­å®ç°ï¼Œå¦ä¸€ä¸ªæ˜¯æ”¾åœ¨åˆ·æ–°æ§ä»¶ç±»ä¸­å®ç°ã€‚å‰è€…éœ€è¦åˆ·æ–°æ§ä»¶æš´éœ²å¾ˆå¤šæ–¹æ³•å’Œå±æ€§ä¾›å¤–éƒ¨è°ƒç”¨ï¼Œåè€…åªéœ€è¦å°†å½“å‰æ»‘åŠ¨è§†å›¾ä¼ é€’ç»™åˆ·æ–°æ§ä»¶ç±»è¿›è¡Œæ“ä½œå³å¯ï¼Œæƒè¡¡åé€‰åè€…ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆé‡å†™&lt;code class=&quot;highlighter-rouge&quot;&gt;UIView&lt;/code&gt;ç±»çš„æ–¹æ³•ï¼Œå°†æ»‘åŠ¨è§†å›¾å–åˆ°å½“å‰ç±»æš‚å­˜ï¼Œå¹¶æ ¹æ®è¯¥è§†å›¾è°ƒæ•´æ§ä»¶çš„ä½ç½®ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (void)willMoveToSuperview:(UIView *)newSuperview {
    [super willMoveToSuperview:newSuperview];
    
    if (newSuperview &amp;amp;&amp;amp; [newSuperview isKindOfClass:[UIScrollView class]]) {
        
        [self removeObserver];
        self.scrollView = (UIScrollView *)newSuperview;
        self.center = CGPointMake(self.scrollView.bounds.size.width*0.5, -TJRefreshPullLen*0.5);
       
        [self addObserver];
    }else {
        [self removeObserver];
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæ·»åŠ KVOæ—¶æ·»åŠ äº†ä¸¤ä¸ªå±æ€§ç›‘å¬ï¼Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;contentOffset&lt;/code&gt;å’Œ&lt;code class=&quot;highlighter-rouge&quot;&gt;contentSize&lt;/code&gt;ï¼Œéœ€è¦è¯´æ˜çš„æ˜¯ï¼Œåœ¨åˆ·æ–°æ§ä»¶ä¸­å…¶å®åªéœ€è¦ç›‘å¬å‰è€…å³å¯ï¼Œåè€…çš„ç›‘å¬æ˜¯åœ¨åšåŠ è½½æ§ä»¶çš„æ—¶å€™ï¼Œéœ€è¦æ ¹æ®çˆ¶æ»‘åŠ¨è§†å›¾çš„å†…å®¹å¤§å°æ¥ç¡®å®šæ§ä»¶ä½ç½®å’Œè®¡ç®—æ§ä»¶æ‰€åœ¨çŠ¶æ€ã€‚è¿™ä¹Ÿæ˜¯ä¸¤ä¸ªæ§ä»¶æœ€å¤§çš„ä¸åŒã€‚&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[self.scrollView addObserver:self forKeyPath:@&quot;contentOffset&quot; options:NSKeyValueObservingOptionNew context:nil];
    [self.scrollView addObserver:self forKeyPath:@&quot;contentSize&quot; options:NSKeyValueObservingOptionNew context:nil];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ¥ä¸‹æ¥å°†ç›‘å¬åˆ°çš„åç§»å€¼è¿›è¡Œå¤„ç†ï¼Œå°äºæé™å€¼ä»€ä¹ˆéƒ½ä¸åšï¼Œå¤§äºæé™å€¼æ—¶æ¾æ‰‹åˆ™è¿›è¡Œåˆ·æ–°æ“ä½œï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;CGFloat value = (layerStrokenValue-(TJRefreshPullLen-TJRefreshHeaderHeight)*0.5)/((TJRefreshPullLen+TJRefreshHeaderHeight)*0.5);

//å¦‚æœä¸æ˜¯æ­£åœ¨åˆ·æ–°ï¼Œåˆ™æ¸å˜åŠ¨ç”»
if (!self.animating) {
    
    self.draftShapeLayer.strokeEnd = value;
    self.squareShapeLayer.strokeEnd = value;
    self.lineShapeLayer1.strokeEnd = value*2;
    self.lineShapeLayer2.strokeEnd = (value-0.5)*2;
    self.wordsShapeLayer.strokeEnd = value;

}
//å¦‚æœåˆ°è¾¾ä¸´ç•Œç‚¹ï¼Œåˆ™æ‰§è¡Œåˆ·æ–°åŠ¨ç”»
if (value &amp;gt; 1 &amp;amp;&amp;amp; !self.animating &amp;amp;&amp;amp; !self.scrollView.dragging){
    [self startAnimation];
    if (self.handle) {
        self.handle();
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™é‡Œæ§ä»¶éœ€è¦æš´éœ²ä¸€ä¸ªæ–¹æ³•åœ¨åˆ·æ–°ç»“æŸæ—¶ä¾›æ»‘åŠ¨è§†å›¾è°ƒç”¨ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (void)endRefreshing {
    
    [self stopAnimation];
    NSLog(@&quot;ç»“æŸåˆ·æ–°&quot;);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;ui&quot;&gt;åŠ è½½æ§ä»¶çš„UI&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¿äº†ä¸€ä¸ªä»Šæ—¥å¤´æ¡çš„åˆ·æ–°æ§ä»¶æ•ˆæœï¼Œç”¨åˆ°äº†iOS9å’Œswift3.0åæ‰æ¨å‡ºçš„&lt;code class=&quot;highlighter-rouge&quot;&gt;CAShapeLayer&lt;/code&gt;ï¼Œç»“åˆ&lt;code class=&quot;highlighter-rouge&quot;&gt;UIBezierPath&lt;/code&gt;ç»˜åˆ¶å‡ºäº†å›¾å½¢çš„çº¿æ¡å’Œè·¯å¾„ï¼Œå†é€šè¿‡ä¸Šé¢çš„æ»‘åŠ¨ç›‘å¬å»æ§åˆ¶çº¿æ¡é¢œè‰²çš„å¡«å……ç™¾åˆ†æ¯”ã€‚è¿™ä¸€æ­¥éª¤æ²¡æœ‰å¤ªå¤æ‚çš„é€»è¾‘ï¼Œç†Ÿæ‚‰ä¸Šé¢ä¸¤ä¸ªç±»çš„ä½¿ç”¨å³å¯ï¼Œä¸ç»†è®²ï¼Œæœ‰å…´è¶£å¯ä»¥ç ”ç©¶&lt;a href=&quot;https://github.com/JoshPellTan/TJRefresh&quot;&gt;demo&lt;/a&gt;ã€‚æˆ‘è¿˜æ·»åŠ äº†ä¸€ä¸ªæ–‡å­—è½¬è´å¡å°”æ›²çº¿çš„æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥ç ”ç©¶ä¸€ä¸‹ã€‚&lt;/p&gt;

&lt;p&gt;åˆ°è¿™é‡Œä¸€ä¸ªåˆ·æ–°æ§ä»¶å°±å®šåˆ¶å®Œæˆäº†ï¼Œåªè´´å‡ºäº†ä¸€äº›éœ€è¦æ³¨æ„çš„åœ°æ–¹çš„ä»£ç ï¼ŒåŠ è½½æ§ä»¶æ·»åŠ ä¹Ÿç±»ä¼¼ã€‚è¿™é‡Œåªå®ç°äº†ä¸€ä¸ªæ•ˆæœï¼ŒåæœŸå¦‚æœç¢°åˆ°äº†å¥½çš„æ•ˆæœï¼Œæˆ‘è¿˜ä¼šç»§ç»­æ·»åŠ çš„ï¼ˆå‰ææ˜¯æˆ‘ä¼šğŸ˜ï¼‰ã€‚&lt;/p&gt;

&lt;p&gt;å¹¿å‘Šæ—¶é—´ï¼šè§‰å¾—ä¸é”™ï¼Œæ¬¢è¿&lt;a href=&quot;https://github.com/JoshPellTan/TJRefresh&quot;&gt;Star&lt;/a&gt;ï¼&lt;/p&gt;

</description>
        <pubDate>Thu, 25 May 2017 16:08:13 +0800</pubDate>
        <link>/2017/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%91%E5%8A%A8%E8%A7%86%E5%9B%BE%E5%88%B7%E6%96%B0%E5%92%8C%E5%8A%A0%E8%BD%BD%E6%8E%A7%E4%BB%B6/</link>
        <guid isPermaLink="true">/2017/05/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%BB%91%E5%8A%A8%E8%A7%86%E5%9B%BE%E5%88%B7%E6%96%B0%E5%92%8C%E5%8A%A0%E8%BD%BD%E6%8E%A7%E4%BB%B6/</guid>
        
        <category>åˆ·æ–°</category>
        
        <category>åŠ è½½</category>
        
        <category>è‡ªå®šä¹‰æ»‘åŠ¨è§†å›¾åˆ·æ–°å’ŒåŠ è½½æ§ä»¶</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>å½•éŸ³ä¸æ’­æ”¾ä»¥åŠç½‘ç»œéŸ³é¢‘æ’­æ”¾</title>
        <description>&lt;p&gt;å…¬å¸ä¸‹ä¸ªç‰ˆæœ¬è®¡åˆ’è¦åšéŸ³é¢‘çš„å½•åˆ¶ä¸æ’­æ”¾ï¼Œè¿™å—æ²¡æ€ä¹ˆæ¥è§¦è¿‡ï¼Œä¸€è¾¹å­¦ä¹ ä¸€è¾¹è¸©å‘ï¼Œä¸‹é¢å°±ç»™å¤§å®¶åšä¸ªåˆ†äº«ï¼Œå…±åŒè¿›æ­¥ã€‚è¿™é‡Œä¹Ÿè´´å‡ºæˆ‘å†™çš„&lt;a href=&quot;https://github.com/JoshPellTan/TJAudioRecorderAndPlayer&quot;&gt;DEMO&lt;/a&gt;ï¼Œæ¬¢è¿ä½¿ç”¨å’Œstarï¼&lt;/p&gt;

&lt;h3 id=&quot;section&quot;&gt;å½•éŸ³&lt;/h3&gt;

&lt;p&gt;&lt;strong&gt;éŸ³é¢‘ä»»åŠ¡åˆå§‹åŒ–&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬è¿™é‡Œç”¨çš„æ˜¯NBçš„AVFoundationæ¡†æ¶ï¼Œè¿™é‡Œä½¿ç”¨AudioSessionæ¥å¯¹éŸ³é¢‘ä»»åŠ¡åšå¤„ç†ï¼Œæ— è®ºæ˜¯å½•åˆ¶è¿˜æ˜¯æ’­æ”¾éƒ½éœ€è¦åšè¿™ä¸€æ­¥ã€‚åˆå§‹åŒ–ä»»åŠ¡ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AVAudioSession *session = [AVAudioSession sharedInstance];
            NSError *sessionError;
[session setCategory:AVAudioSessionCategoryPlayAndRecord error:&amp;amp;sessionError];
if(session == nil){
    NSLog(@&quot;Error creating session: %@&quot;, [sessionError description]);
}else{
    [session setActive:YES error:nil];//æ¿€æ´»å½“å‰session
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¦‚æœä¸åšåˆå§‹åŒ–ï¼Œç›´æ¥ä½¿ç”¨AudioRecorderçš„è¯ï¼Œå½•åˆ¶å‡ºæ¥æ˜¯æ²¡æœ‰ä»»ä½•å£°éŸ³çš„ï¼Œä¸‹é¢å‡ ç‚¹å°±æ˜¯åŸå› ï¼Œä¹Ÿæ˜¯å®ƒçš„ä¸»è¦åŠŸèƒ½ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.ä¸ºappé€‰æ‹©è¾“å…¥è¾“å‡ºçš„è·¯ç”± ï¼ˆé€šè¿‡æ‰¬å£°å™¨è¿˜æ˜¯å¬ç­’æ’­æ”¾ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;2.åè°ƒéŸ³é¢‘æ’­æ”¾çš„appä¹‹é—´çš„å…³è”ï¼Œä»¥åŠç³»ç»Ÿçš„å£°éŸ³å¤„ç†&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;3.å¤„ç†è¢«å…¶ä»–appsæ‰“æ–­&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;4.åˆ›å»ºä¸€ä¸ªå½•éŸ³æˆ–è€…æ’­æ”¾éŸ³ä¹çš„ä»»åŠ¡&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è€Œè¿™é‡Œçš„å‚æ•°&lt;code class=&quot;highlighter-rouge&quot;&gt;AVAudioSessionCategoryPlayAndRecord&lt;/code&gt;éœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œå¯ä»¥æ ¹æ®å®é™…æƒ…å†µé€‰æ‹©ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;* AVAudioSessionCategorySoloAmbient 
  ä¼šåœæ­¢å…¶ä»–ç¨‹åºçš„éŸ³é¢‘æ’­æ”¾ã€‚å½“è®¾å¤‡è¢«è®¾ç½®ä¸ºé™éŸ³æ¨¡å¼ï¼Œappä¹ŸåŒæ ·è¢«åœæ­¢
* AVAudioSessionCategoryRecord
  ä»…ç”¨æ¥å½•éŸ³ï¼Œæ— æ³•æ’­æ”¾éŸ³é¢‘
* AVAudioSessionCategoryPlayback 
 ä¼šåœæ­¢å…¶å®ƒéŸ³é¢‘æ’­æ”¾ï¼Œå¹¶ä¸”èƒ½åœ¨åå°æ’­æ”¾ï¼Œé”å±andé™éŸ³æ¨¡å¼ä¸‹å‡å¯
* AVAudioSessionCategoryPlayAndRecord
  èƒ½æ’­ä¹Ÿèƒ½å½•ï¼Œæ’­æ”¾é»˜è®¤å£°éŸ³æ˜¯ä»å¬ç­’å‡ºæ¥
* AVAudioSessionCategoryAmbient
  appçš„å£°éŸ³å¯ä¸å…¶å®ƒappå…±å­˜ï¼Œä½†é”å±å’Œé™éŸ³æƒ…å†µä¼šè¢«åœæ­¢ï¼Œé™¤éå½“å‰appæ˜¯å”¯ä¸€æ’­æ”¾çš„app
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;åˆå§‹åŒ–å½•éŸ³å™¨&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å½•éŸ³éœ€è¦è°ƒç”¨AVAudioRecorderï¼Œä¸‹é¢ä»£ç ç”¨äºåˆå§‹åŒ–å½•éŸ³å™¨ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
playName = [NSString stringWithFormat:@&quot;%@/play.aac&quot;,docDir];
//å½•éŸ³è®¾ç½®
recorderSettingsDict =[[NSDictionary alloc] initWithObjectsAndKeys:
                                   [NSNumber 										numberWithInt:kAudioFormatMPEG4AAC],AVFormatIDKey,
                                   [NSNumber numberWithInt:8000],AVSampleRateKey,
                                   [NSNumber numberWithInt:1],AVNumberOfChannelsKey,
                                   AVAudioQualityHigh,AVEncoderAudioQualityKey,
                                   nil];

NSError *error = nil;
//å¿…é¡»çœŸæœºä¸Šæµ‹è¯•,æ¨¡æ‹Ÿå™¨ä¸Šå¯èƒ½ä¼šå´©æºƒ
_recorder = [[AVAudioRecorder alloc] initWithURL:[NSURL URLWithString:playName] settings:recorderSettingsDict error:&amp;amp;error];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å…ˆç»™å¤§å®¶çœ‹ä¸€ä¸‹åˆå§‹åŒ–å­—å…¸é‡Œé¢çš„å‚æ•°ï¼š&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;AVFormatIDKey&lt;/code&gt;â€”â€”éŸ³é¢‘æ ¼å¼ï¼Œä¸»è¦æœ‰ä¸€ä¸‹æ”¯æŒæ ¼å¼ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;kAudioFormatLinearPCM
kAudioFormatMPEG4AAC
kAudioFormatAppleLossless
kAudioFormatAppleMA4
kAudioFormatiLBC
kAudioFormatULaw é€‰æ‹©kAudioFormatLinearPCMä¼šå°†æœªå‹ç¼©çš„éŸ³é¢‘æµå†™å…¥åˆ°æ–‡ä»¶ä¸­.è¿™ç§æ ¼å¼ä¿çœŸåº¦æœ€é«˜,ä¸è¿‡ç›¸åº”çš„æ–‡ä»¶ä¹Ÿæœ€å¤§.é€‰æ‹©è¯¸å¦‚kAudioFormatMPEG4AACæˆ–è€…kAudioFormatAppleMA4çš„å‹ç¼©æ ¼å¼ä¼šæ˜¾è‘—ç¼©å°æ–‡ä»¶,ä¹Ÿèƒ½ä¿è¯é«˜è´¨é‡çš„éŸ³é¢‘å†…å®¹ã€‚æˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯kAudioFormatMPEG4AAC,è€Œä¸”å®‰å“å’Œè‹¹æœéƒ½æ”¯æŒæ’­æ”¾ã€‚
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;AVSampleRateKey&lt;/code&gt;â€”â€”é‡‡æ ·ç‡ï¼Œå•ä½HZï¼Œé‡‡æ ·ç‡è¶Šå°å£°éŸ³è´¨é‡è¶Šä½ï¼Œé€šå¸¸æœ‰8000/44100/96000ï¼Œé‡‡æ ·ç‡å¿…é¡»è¦è®¾ä¸º11025æ‰èƒ½ä½¿è½¬åŒ–æˆmp3æ ¼å¼åä¸ä¼šå¤±çœŸ&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;AVNumberOfChannelsKey&lt;/code&gt;â€”â€”å£°é“æ•°ï¼Œ1æˆ–2ï¼Œé™¤éä½¿ç”¨å¤–éƒ¨ç¡¬ä»¶,å¦åˆ™é€šå¸¸åº”å½“åˆ›å»ºå•å£°é“å½•éŸ³ã€‚é€šå¸¸å•å£°é“è¶³ä»¥æ»¡è¶³æˆ‘ä»¬å½•éŸ³åŠŸèƒ½çš„éœ€è¦ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;AVEncoderAudioQualityKey&lt;/code&gt;â€”â€”å½•éŸ³éŸ³è´¨ï¼Œæ˜¯ä¸€ä¸ªæšä¸¾å€¼ï¼Œè¿™é‡Œæˆ‘é€‰AVAudioQualityHighä¸­ç­‰è´¨é‡ã€‚&lt;/p&gt;

&lt;p&gt;æ›´å¤šå‚è€ƒ&lt;a href=&quot;http://www.jianshu.com/p/135ca0deceec&quot;&gt;é“¾æ¥&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;å¼€å§‹å½•åˆ¶&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;_recorder.meteringEnabled = YES;//è®¾ç½®yesæ‰èƒ½ç›‘æµ‹è¾“å…¥çš„éŸ³é‡å¤§å°ï¼Œå¯ä»¥ç”¨ä½œç”¨æˆ·ç•Œé¢åé¦ˆ
[_recorder record];
volumeTimer = [NSTimer scheduledTimerWithTimeInterval:volumeObserverMargin target:weakSelf selector:@selector(levelTimer:) userInfo:nil repeats:YES];//æ–°å»ºä¸€ä¸ªè®¡æ—¶å™¨ç”¨ä½œæµ‹é‡éŸ³é‡å¤§å°
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;ç›‘æµ‹éŸ³é‡&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;//è¾“å…¥å£°éŸ³çš„åˆ†è´å¤§å°è®¡ç®—
[_recorder updateMeters];
const double ALPHA = 0.05;
double peakPowerForChannel = pow(10, (0.05 * [_recorder peakPowerForChannel:0]));
lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;åœæ­¢å½•éŸ³&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;_recorder stop];
_recorder = nil;
//ç»“æŸå®šæ—¶å™¨
[volumeTimer invalidate];
volumeTimer = nil;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-1&quot;&gt;æ’­æ”¾æœ¬åœ°å½•éŸ³&lt;/h3&gt;

&lt;p&gt;è¿™é‡Œåˆ†ä¸¤æ­¥æ“ä½œï¼Œä¸€æ˜¯æ’­æ”¾æœ¬åœ°éŸ³é¢‘ï¼ŒäºŒæ˜¯è¿›è¡Œè¿›åº¦ç›‘å¬&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ’­æ”¾æœ¬åœ°éŸ³é¢‘&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[playerLocal play];
progressTimer = [NSTimer scheduledTimerWithTimeInterval:playerTimeObserverMargin target:self selector:@selector(recorderTimeViewer) userInfo:nil repeats:YES];//æ–°å»ºè®¡æ—¶å™¨ç›‘å¬æ’­æ”¾è¿›åº¦
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;&lt;strong&gt;æ’­æ”¾è¿›åº¦ç›‘å¬&lt;/strong&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSLog(@&quot;æ€»æ—¶é•¿ï¼š%f--å½“å‰æ—¶é—´ç‚¹ï¼š%f&quot;,_playerLocal.duration,_playerLocal.currentTime);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-2&quot;&gt;æ’­æ”¾ç½‘ç»œéŸ³é¢‘&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;_songItem = [[AVPlayerItem alloc]initWithURL:url];
_playerNetwork = [[AVPlayer alloc]initWithPlayerItem:_songItem];
[_playerNetwork play];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è·å–ç½‘ç»œèµ„æºæ€»æ—¶é•¿çš„æ–¹æ³•ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;netAudioTime = CMTimeGetSeconds(_songItem.asset.duration);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;tips&quot;&gt;Tips&lt;/h3&gt;

&lt;p&gt;1..plistæ–‡ä»¶ä¸­åŠ å…¥éº¦å…‹é£è¯·æ±‚æƒé™
2.å¦‚æœéœ€è¦æ’­æ”¾ç½‘ç»œéŸ³é¢‘ï¼Œæ·»åŠ &lt;code class=&quot;highlighter-rouge&quot;&gt;App Transport Security Settings&lt;/code&gt;ä¸‹çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;Allow Arbitrary Loads&lt;/code&gt;å¹¶è®¾ç½®ä¸ºYES
3.å¦‚æœéœ€è¦appæ”¯æŒåå°æ’­æ”¾éŸ³é¢‘ï¼Œéœ€è¦æ‰“å¼€&lt;code class=&quot;highlighter-rouge&quot;&gt;Capabilities&lt;/code&gt;ä¸‹é¢&lt;code class=&quot;highlighter-rouge&quot;&gt;Background Modes&lt;/code&gt;ä¸‹é¢çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;Audio,AirPlay,and Picture in Picture&lt;/code&gt;é€‰é¡¹ï¼Œä½†æ˜¯å®¡æ ¸çš„æ—¶å€™è‹¹æœå¦‚æœè®¤ä¸ºä½ æ²¡æœ‰å¿…è¦æ‰“å¼€è¿™ä¸ªåŠŸèƒ½ï¼Œä¼šè¢«æ‹’å“¦ï¼
4.ä¸ç”¨å¤–æ¥è®¾å¤‡å½•éŸ³å’Œæ’­æ”¾ä¼šå£°éŸ³å°ï¼Œè§£å†³åŠæ³•æ˜¯æ’­æ”¾å‰åŠ å…¥ä¸‹é¢ä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSError *audioError = nil;
BOOL success = [audioSession overrideOutputAudioPort:AVAudioSessionPortOverrideSpeaker error:&amp;amp;audioError];
if(!success)
{
NSLog(@&quot;error doing outputaudioportoverride - %@&quot;, [audioError localizedDescription]);
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;tips-one-more&quot;&gt;Tips one more&lt;/h3&gt;

&lt;p&gt;å®Œæ•´åŠŸèƒ½çš„&lt;a href=&quot;https://github.com/JoshPellTan/TJAudioRecorderAndPlayer&quot;&gt;demo&lt;/a&gt;å·²ç»æ›´æ–°ï¼Œåˆ†åˆ«å®ç°äº†å½•éŸ³ã€æ’­æ”¾æœ¬åœ°å½•éŸ³å’Œæ’­æ”¾ç½‘ç»œéŸ³é¢‘çš„&lt;code class=&quot;highlighter-rouge&quot;&gt;æ’­æ”¾&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;æš‚åœ&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;ç»§ç»­&lt;/code&gt;ã€&lt;code class=&quot;highlighter-rouge&quot;&gt;åœæ­¢&lt;/code&gt;ã€‚&lt;/p&gt;
</description>
        <pubDate>Fri, 19 May 2017 16:08:13 +0800</pubDate>
        <link>/2017/05/%E5%BD%95%E9%9F%B3%E4%B8%8E%E6%92%AD%E6%94%BE%E4%BB%A5%E5%8F%8A%E7%BD%91%E7%BB%9C%E9%9F%B3%E9%A2%91%E6%92%AD%E6%94%BE/</link>
        <guid isPermaLink="true">/2017/05/%E5%BD%95%E9%9F%B3%E4%B8%8E%E6%92%AD%E6%94%BE%E4%BB%A5%E5%8F%8A%E7%BD%91%E7%BB%9C%E9%9F%B3%E9%A2%91%E6%92%AD%E6%94%BE/</guid>
        
        <category>å¤šåª’ä½“</category>
        
        <category>éŸ³é¢‘</category>
        
        <category>å½•éŸ³ä¸æ’­æ”¾ä»¥åŠç½‘ç»œéŸ³é¢‘æ’­æ”¾</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>ç¼–ç¨‹æ€æƒ³å°è§‘</title>
        <description>&lt;p&gt;æœ€è¿‘åœ¨ç ”ç©¶RAC,å‘ç°ç¼–ç¨‹æ€æƒ³è¿™ä¸€ä¸ªå¾ˆæœ‰è¶£ä¸”æœ‰ç”¨çš„ä¸œè¥¿ï¼Œå°±å¤§æ¦‚ç ”ç©¶äº†ä¸€ä¸‹â€œé“¾å¼ç¼–ç¨‹â€ã€â€œå‡½æ•°å¼ç¼–ç¨‹â€ã€â€œå“åº”å¼ç¼–ç¨‹â€å‡ ç§ä¸»è¦çš„ç¼–ç¨‹æ€æƒ³ï¼Œå‘ç°å¯¹æé«˜ä»£ç è´¨é‡å’Œä¸šåŠ¡æ°´å¹³å¾ˆæœ‰å¸®åŠ©ï¼Œä¸‹é¢å°±æŒ¨ä¸ªä»‹ç»ä¸€ä¸‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥çœ‹æˆ‘çš„&lt;a href=&quot;https://github.com/JoshPellTan/ThinkingInPerl.git&quot;&gt;DEMO&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;section&quot;&gt;é“¾å¼ç¼–ç¨‹&lt;/h3&gt;

&lt;h4 id=&quot;section-1&quot;&gt;&lt;em&gt;æ€æƒ³ç‰¹ç‚¹&lt;/em&gt;ï¼š&lt;/h4&gt;
&lt;p&gt;æ˜¯å°†å¤šä¸ªæ“ä½œï¼ˆå¤šè¡Œä»£ç ï¼‰é€šè¿‡ç‚¹å·(.)é“¾æ¥åœ¨ä¸€èµ·æˆä¸ºä¸€å¥ä»£ç ,ä½¿ä»£ç å¯è¯»æ€§å¥½ã€‚ç±»ä¼¼a(1).b(2).c(3)ï¼Œæ–¹æ³•çš„è¿”å›å€¼æ˜¯block,blockå¿…é¡»æœ‰è¿”å›å€¼ï¼ˆæœ¬èº«å¯¹è±¡ï¼‰ï¼Œblockå‚æ•°ï¼ˆéœ€è¦æ“ä½œçš„å€¼ï¼‰&lt;/p&gt;

&lt;h4 id=&quot;section-2&quot;&gt;&lt;em&gt;ä»£è¡¨&lt;/em&gt;ï¼š&lt;/h4&gt;
&lt;p&gt;masonryæ¡†æ¶ã€SDAutoLayoutæ¡†æ¶ã€‚&lt;/p&gt;

&lt;h4 id=&quot;demo&quot;&gt;&lt;em&gt;demo&lt;/em&gt;:&lt;/h4&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;TJChainedModeClass *chainedMode1 = [TJChainedModeClass new];
chainedMode1.addName(@&quot;jackson&quot;).addNickname(@&quot;josh&quot;).addAge(5).addHeadImg(nil);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å…¶ä¸­&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;chainedMode1.addName(@&quot;jackson&quot;).addNickname(@&quot;josh&quot;).addAge(5).addHeadImg(nil);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;æ¯ä¸€æ­¥ç‚¹æ“ä½œéƒ½ä¼šè¿”å›ä¸€ä¸ªTJChainedModeClasså®ä¾‹å¯¹è±¡ï¼Œè¿™æ ·å°±å¯ç›´æ¥è°ƒå–ä¸‹ä¸€ä¸ªç‚¹å±æ€§æ“ä½œ&lt;/p&gt;

&lt;p&gt;è¿™é‡Œè´´å‡ºä¸€ä¸ªç‚¹æ“ä½œå‡½æ•°ï¼Œå…¶ä»–çš„éƒ½æ˜¯ç±»ä¼¼å½¢å¼&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;typedef TJChainedModeClass *(^configerString)(NSString *string);//è¿™é‡Œçš„configerStringæ˜¯åœ¨.hæ–‡ä»¶ä¸­å®šä¹‰çš„è¿”å›å€¼ä¸ºæœ¬ç±»å¯¹è±¡çš„ä¸€ä¸ªblock,æ”¾è¿™é‡Œæ–¹ä¾¿æŸ¥çœ‹

-(configerString)addName{
    
    if (!_addName) {
        
        __weak typeof(self) weakSelf = self;
        return ^(NSString *string){
            
            weakSelf.name = string;
            return weakSelf;
        };
    }
    
    return _addName;
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-3&quot;&gt;å“åº”å¼ç¼–ç¨‹&lt;/h3&gt;

&lt;h4 id=&quot;section-4&quot;&gt;&lt;em&gt;æ€æƒ³ç‰¹ç‚¹&lt;/em&gt;ï¼š&lt;/h4&gt;
&lt;p&gt;ä¸éœ€è¦è€ƒè™‘è°ƒç”¨é¡ºåºï¼Œåªéœ€è¦çŸ¥é“è€ƒè™‘ç»“æœï¼Œç±»ä¼¼äºè´è¶æ•ˆåº”ï¼Œäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œä¼šå½±å“å¾ˆå¤šä¸œè¥¿ï¼Œè¿™äº›äº‹ä»¶åƒæµä¸€æ ·çš„ä¼ æ’­å‡ºå»ï¼Œç„¶åå½±å“ç»“æœï¼Œå€Ÿç”¨é¢å‘å¯¹è±¡çš„ä¸€å¥è¯ï¼Œä¸‡ç‰©çš†æ˜¯æµã€‚æ˜¯æŠŠæ“ä½œå°½é‡å†™æˆä¸€ç³»åˆ—åµŒå¥—çš„å‡½æ•°æˆ–è€…æ–¹æ³•è°ƒç”¨ã€‚
#### &lt;em&gt;ä»£è¡¨&lt;/em&gt;ï¼š
KVOè¿ç”¨ã€ReactiveCocoa(ä¹Ÿåšå‡½æ•°å“åº”å¼ç¼–ç¨‹)ã€‚&lt;/p&gt;

&lt;h4 id=&quot;demo-1&quot;&gt;&lt;em&gt;demo&lt;/em&gt;&lt;/h4&gt;
&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;è¿™é‡Œæˆ‘é€‰ç”¨KVOçš„æ–¹å¼æ¥å®ç°ï¼Œå…¶å®æ–¹æ³•å¾ˆå¤šï¼Œå¯ä»¥å‚è€ƒRACã€‚æˆ‘è¿™é‡Œæ˜¯ç»™æœ¬ç±»çš„reactNumæ·»åŠ å±æ€§ç›‘å¬ï¼Œæœ‰æ”¹å˜å¤–éƒ¨è°ƒç”¨çš„åœ°æ–¹ä¹Ÿä¼šæ‰§è¡Œblockï¼Œè€Œå¦å¤–ä¸€ä¸ªå±æ€§normalNumçš„æ”¹å˜åˆ™ä¸ä¼šå¼•èµ·è¿™ç§æ”¹å˜
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;.hä¸­ä»£ç :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;reactNum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;normalNum&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;reactBlock&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;num2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;.må®ç°:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-(instancetype)init{
    self = [super init];
    
    [self addObserver:self forKeyPath:@&quot;reactNum&quot; options:NSKeyValueObservingOptionNew context:nil];
    
    return self;
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary&amp;lt;NSKeyValueChangeKey,id&amp;gt; *)change context:(void *)context{
    
    self.reactBlock(self.normalNum,self.reactNum);
    
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è°ƒç”¨ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;-(void)reactProgramming{
    
    //ç±»ä¸­çš„reactNumæ•°å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè°ƒç”¨æ‰“å°æ–¹æ³•
    TJReactiveProgrammingClass *reactObj = [TJReactiveProgrammingClass new];
    _reactObj = reactObj;
    
    //[reactObj TJ_addObserver:self forKeyPath:@&quot;reactNum&quot; options:NSKeyValueObservingOptionNew  context:nil];
    reactObj.reactBlock = ^(int normalNum,int reactNum){
        
        NSLog(@&quot;normalNum:%d----reactNum:%d&quot;,normalNum,reactNum);
        
    };
}
//ç‚¹å‡»æµ‹è¯•æ•ˆæœ
-(void)touchesBegan:(NSSet&amp;lt;UITouch *&amp;gt; *)touches withEvent:(UIEvent *)event{
    
    _reactObj.reactNum = arc4random() % 100;//æ”¹å˜æ—¶ä¼šå“åº”
    //_reactObj.normalNum = arc4random() % 100;//æ”¹å˜æ—¶ä¸ä¼šå“åº”
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;section-5&quot;&gt;å‡½æ•°å¼ç¼–ç¨‹&lt;/h3&gt;

&lt;p&gt;ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼Ÿå‡½æ•°å¼ç¼–ç¨‹åœ¨iOSä¸­æ˜¯å€Ÿç”±blockå®ç°çš„ï¼Œé€šè¿‡å£°æ˜ä¸€ä¸ªblockï¼Œç±»ä¼¼äºå®šä¹‰äº†ä¸€ä¸ªâ€œå‡½æ•°â€ï¼Œå†å°†è¿™ä¸ªâ€œå‡½æ•°â€ä¼ é€’ç»™è°ƒç”¨çš„æ–¹æ³•ï¼Œä»¥æ­¤æ¥å®ç°å¯¹è°ƒç”¨è¯¥æ–¹æ³•æ—¶ä¸­é—´ä¸€äº›è¿‡ç¨‹æˆ–è€…å¯¹ç»“æœå¤„ç†çš„â€œè‡ªå®šä¹‰â€ï¼Œè€Œå…¶å†…éƒ¨çš„å…¶ä»–ç¯èŠ‚å®Œå…¨ä¸éœ€è¦æš´éœ²ç»™è°ƒç”¨è€…ã€‚å®é™…ä¸Šï¼Œè°ƒç”¨è€…ä¹Ÿæ ¹æœ¬ä¸éœ€è¦çŸ¥é“ã€‚&lt;/p&gt;

&lt;p&gt;å’±ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;[self.playBtn mas_makeConstraints:^(MASConstraintMaker *make) {
        make.center.equalTo(self.picView);
        make.width.height.mas_equalTo(50);
    }];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä»ä¸­å¯ä»¥çœ‹å‡ºï¼ŒMasonryä¸­å®ç°è‡ªåŠ¨å¸ƒå±€çš„å…³é”®ç±»MASConstraintMakerï¼Œä»–çš„å®ä¾‹å¹¶ä¸æ˜¯è°ƒç”¨è€…è‡ªå·±åˆ›å»ºçš„ï¼Œè€Œæ˜¯é€šè¿‡è°ƒç”¨æ–¹æ³•mas_makeConstraints:ï¼ˆè¿™é‡Œæ˜¯ç”¨äº†Categoryï¼‰ï¼Œå…¶å‚æ•°blockä¸­çš„å‚æ•°ä¼ é€’è¿‡æ¥çš„ã€‚&lt;/p&gt;

&lt;p&gt;ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡mas_makeConstraints:è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬ä¸éœ€è¦çŸ¥é“MASConstraintMakerçš„å®ä¾‹æ˜¯æ€ä¹ˆåˆ›å»ºçš„ï¼Œä¹Ÿä¸éœ€è¦çŸ¥é“å…·ä½“æ˜¯æ€ä¹ˆå®ç°äº†ç»™Viewæ·»åŠ äº†è‡ªåŠ¨å¸ƒå±€ï¼Œå”¯ä¸€éœ€è¦çš„æ˜¯å®ç°ï¼ˆä¼ é€’ï¼‰ä¸€ä¸ªblockï¼Œåœ¨blocké‡ŒæŒ‰ç…§Masonryçš„æ–¹å¼æŒ‡å®šéœ€è¦æ·»åŠ çš„çº¦æŸå°±å¯ä»¥äº†ã€‚&lt;/p&gt;

&lt;p&gt;è¿™ç§å®ç°æ–¹å¼å°±æ˜¯æœ¬ç¯‡è¦è¯´çš„å‡½æ•°å¼ç¼–ç¨‹ã€‚&lt;/p&gt;

&lt;h4 id=&quot;section-6&quot;&gt;&lt;em&gt;å‡½æ•°å¼ç¼–ç¨‹æœ¬è´¨&lt;/em&gt;:&lt;/h4&gt;
&lt;p&gt;å°±æ˜¯å¾€æ–¹æ³•ä¸­ä¼ å…¥Block,æ–¹æ³•ä¸­åµŒå¥—Blockè°ƒç”¨ï¼ŒæŠŠä»£ç èšåˆèµ·æ¥ç®¡ç†
#### &lt;em&gt;å‡½æ•°å¼ç¼–ç¨‹ç‰¹ç‚¹&lt;/em&gt;ï¼š
æ¯ä¸ªæ–¹æ³•å¿…é¡»æœ‰è¿”å›å€¼ï¼ˆæœ¬èº«å¯¹è±¡ï¼‰,æŠŠå‡½æ•°æˆ–è€…Blockå½“åšå‚æ•°,blockå‚æ•°ï¼ˆéœ€è¦æ“ä½œçš„å€¼ï¼‰blockè¿”å›å€¼ï¼ˆæ“ä½œç»“æœï¼‰
#### &lt;em&gt;ä»£è¡¨&lt;/em&gt;ï¼š
Masonryã€ReactiveCocoa(ä¹Ÿåšå‡½æ•°å“åº”å¼ç¼–ç¨‹)ã€‚&lt;/p&gt;

&lt;h4 id=&quot;demo-2&quot;&gt;&lt;em&gt;demo&lt;/em&gt;ï¼š&lt;/h4&gt;

&lt;p&gt;ç°åœ¨æœ‰ä¸ªç±»ï¼Œå®ƒæœ‰ä¸€ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;NSString *finalString&lt;/code&gt;å±æ€§ï¼Œæˆ‘ä¸æƒ³æš´éœ²ç»™å¤–éƒ¨ï¼Œåœ¨.hæ–‡ä»¶ä¸­æˆ‘å®šä¹‰ä¸€ä¸ªèƒ½ä¼ å…¥å¤–éƒ¨blickçš„æ–¹æ³•ï¼Œå’Œä¸€ä¸ªå¯ä»¥æ“ä½œè¿™ä¸ªå±æ€§å€¼çš„æ–¹æ³•ï¼ˆå¯èƒ½ç±»çš„å†…éƒ¨éœ€è¦è¿™ç§æ“ä½œï¼Œä½†åˆä¸æƒ³æŠŠå±æ€§æš´éœ²ï¼‰&lt;/p&gt;

&lt;p&gt;.hä»£ç ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;makeTool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TJFunctionalProgrammingClass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;tool&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;block&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;TJFunctionalProgrammingClass&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Function&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSArray&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;strings&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;strong&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;readonly&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Function&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;FunctionalAction&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;.måŠ å…¥ä¸€ä¸ªç§æœ‰å±æ€§ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;@property&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;nonatomic&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;copy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;NSString&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;finalString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;.mæ–¹æ³•å®ç°:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;+(NSString *)makeTool:(void (^)(TJFunctionalProgrammingClass *tool))block{
    
    if (block) {
        TJFunctionalProgrammingClass *tool = [[TJFunctionalProgrammingClass alloc]init];
        
        block(tool);
        
        return tool.finalString;
    }
    
    return nil;
}

-(Function)FunctionalAction{
    
    __weak typeof(self) weakself = self;
    return ^(NSArray&amp;lt;NSString *&amp;gt; *strings ){
        
        if (strings.count&amp;gt;0) {
            weakself.finalString = [NSString stringWithFormat:@&quot;FunctionalProgramming + %@&quot;,[strings componentsJoinedByString:@&quot;-&quot;]];
        }else{
            weakself.finalString = @&quot;FunctionalProgramming + nil&quot;;
        }
        
        return weakself;
    };
}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è°ƒç”¨ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *str = [TJFunctionalProgrammingClass makeTool:^(TJFunctionalProgrammingClass *tool) {
       
        tool.FunctionalAction(@[@&quot;å¼ ä¸‰&quot;,@&quot;æå››&quot;,@&quot;ç‹äº”&quot;]);
        
    }];
    
    NSLog(@&quot;functionalProgramming----%@&quot;,str);
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
        <pubDate>Tue, 16 May 2017 16:08:13 +0800</pubDate>
        <link>/2017/05/%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E5%B0%8F%E8%A7%91/</link>
        <guid isPermaLink="true">/2017/05/%E7%BC%96%E7%A8%8B%E6%80%9D%E6%83%B3%E5%B0%8F%E8%A7%91/</guid>
        
        <category>ç¼–ç¨‹æ€æƒ³</category>
        
        <category>é“¾å¼ç¼–ç¨‹</category>
        
        <category>å“åº”å¼ç¼–ç¨‹</category>
        
        <category>å‡½æ•°å¼ç¼–ç¨‹</category>
        
        <category>ç¼–ç¨‹æ€æƒ³å°è§‘</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>iOSå¯åŠ¨é€Ÿåº¦çš„ä¼˜åŒ–</title>
        <description>&lt;p&gt;æœ€è¿‘æˆ‘ä»¬APPå®‰å“ç«¯åšäº†ä¸ªå°ä¼˜åŒ–ï¼Œå°†ç½‘ç»œæ¡†æ¶åšäº†æ›´æ¢ï¼Œå¹¶ä¸”å‡å°‘äº†å¯åŠ¨æ—¶å€™çš„ä¸€äº›åˆå§‹åŒ–ã€‚ç„¶åCTOæ‹¿ç€ä¸€ä¸ªå®‰å“æ‰‹æœºè¿‡æ¥å¯¹æˆ‘è¯´ï¼Œå®‰å“ä¼˜åŒ–åæ¯”ä½ ä»¬å¿«å¤šäº†ã€‚å•¥ï¼Ÿä¸å¯èƒ½ï¼Œè‹¹æœæ‰‹æœºå¤§å‡ åƒå‘¢ï¼ç©å„¿å‘¢ï¼Ÿï¼ä¸æœï¼Œä¸‹ç­æ‹¿äº†ä¸€ä¸ªå®‰å“2000å¤šå—çš„æ‰‹æœºè·Ÿæˆ‘çš„è‹¹æœæ‰‹æœºåšäº†ä¸€ä¸‹APPæ‰“å¼€æ¯”è¾ƒï¼Œè‹¹æœå®Œè´¥ï¼å¿…é¡»ä¸æœï¼Œå’±ä¹Ÿè¦ä¼˜åŒ–æ‰“å¼€é€Ÿåº¦ï¼&lt;/p&gt;

&lt;p&gt;å¾ˆå¤šåœ°æ–¹è¯´æµ‹ä¸€ä¸‹&lt;code class=&quot;highlighter-rouge&quot;&gt;main&lt;/code&gt;æ–¹æ³•åˆ°&lt;code class=&quot;highlighter-rouge&quot;&gt;- (BOOL)Application:(UIApplication *)Application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions&lt;/code&gt;æ–¹æ³•çš„æ—¶é—´å°±æ˜¯APPçš„æ‰“å¼€æ—¶é—´äº†ï¼Œè™½ç„¶èƒ½ä¸€å®šç¨‹åº¦ä¸Šåæ˜ è¿™ä¸ªæŒ‡æ ‡ï¼Œä½†æ˜¯ä¸ä¸¥è°¨ã€‚&lt;/p&gt;

&lt;p&gt;t(Appæ€»å¯åŠ¨æ—¶é—´) = t1(main()ä¹‹å‰çš„åŠ è½½æ—¶é—´) + t2(main()ä¹‹åçš„åŠ è½½æ—¶é—´)ã€‚ t1 = ç³»ç»Ÿdylib(åŠ¨æ€é“¾æ¥åº“)å’Œè‡ªèº«Appå¯æ‰§è¡Œæ–‡ä»¶çš„åŠ è½½ï¼› t2 = mainæ–¹æ³•æ‰§è¡Œä¹‹ååˆ°AppDelegateç±»ä¸­çš„- (BOOL)Application:(UIApplication *)Application didFinishLaunchingWithOptions:(NSDictionary *)launchOptionsæ–¹æ³•æ‰§è¡Œç»“æŸå‰è¿™æ®µæ—¶é—´ï¼Œä¸»è¦æ˜¯æ„å»ºç¬¬ä¸€ä¸ªç•Œé¢ï¼Œå¹¶å®Œæˆæ¸²æŸ“å±•ç¤ºã€‚&lt;/p&gt;

&lt;h3 id=&quot;main&quot;&gt;main()è°ƒç”¨ä¹‹å‰çš„åŠ è½½è¿‡ç¨‹&lt;/h3&gt;

&lt;p&gt;Appå¼€å§‹å¯åŠ¨åï¼Œ ç³»ç»Ÿé¦–å…ˆåŠ è½½å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè‡ªèº«Appçš„æ‰€æœ‰.oæ–‡ä»¶çš„é›†åˆï¼‰ï¼Œç„¶ååŠ è½½åŠ¨æ€é“¾æ¥åº“dyldï¼Œdyldæ˜¯ä¸€ä¸ªä¸“é—¨ç”¨æ¥åŠ è½½åŠ¨æ€é“¾æ¥åº“çš„åº“ã€‚ æ‰§è¡Œä»dyldå¼€å§‹ï¼Œdyldä»å¯æ‰§è¡Œæ–‡ä»¶çš„ä¾èµ–å¼€å§‹, é€’å½’åŠ è½½æ‰€æœ‰çš„ä¾èµ–åŠ¨æ€é“¾æ¥åº“ã€‚ 
åŠ¨æ€é“¾æ¥åº“åŒ…æ‹¬ï¼šiOS ä¸­ç”¨åˆ°çš„æ‰€æœ‰ç³»ç»Ÿ frameworkï¼ŒåŠ è½½OC runtimeæ–¹æ³•çš„libobjcï¼Œç³»ç»Ÿçº§åˆ«çš„libSystemï¼Œä¾‹å¦‚libdispatch(GCD)å’Œlibsystem_blocks (Block)ã€‚&lt;/p&gt;

&lt;p&gt;å…¶å®æ— è®ºå¯¹äºç³»ç»Ÿçš„åŠ¨æ€é“¾æ¥åº“è¿˜æ˜¯å¯¹äºAppæœ¬èº«çš„å¯æ‰§è¡Œæ–‡ä»¶è€Œè¨€ï¼Œä»–ä»¬éƒ½ç®—æ˜¯imageï¼ˆé•œåƒï¼‰ï¼Œè€Œæ¯ä¸ªAppéƒ½æ˜¯ä»¥image(é•œåƒ)ä¸ºå•ä½è¿›è¡ŒåŠ è½½çš„ï¼Œé‚£ä¹ˆimageç©¶ç«ŸåŒ…æ‹¬å“ªäº›å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;image&quot;&gt;ä»€ä¹ˆæ˜¯image&lt;/h3&gt;

&lt;p&gt;1.executableå¯æ‰§è¡Œæ–‡ä»¶ æ¯”å¦‚.oæ–‡ä»¶ã€‚ 
2.dylib åŠ¨æ€é“¾æ¥åº“ frameworkå°±æ˜¯åŠ¨æ€é“¾æ¥åº“å’Œç›¸åº”èµ„æºåŒ…å«åœ¨ä¸€èµ·çš„ä¸€ä¸ªæ–‡ä»¶å¤¹ç»“æ„ã€‚ 
3.bundle èµ„æºæ–‡ä»¶ åªèƒ½ç”¨dlopenåŠ è½½ï¼Œä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼åŠ è½½ã€‚&lt;/p&gt;

&lt;p&gt;é™¤äº†æˆ‘ä»¬Appæœ¬èº«çš„å¯è¡Œæ€§æ–‡ä»¶ï¼Œç³»ç»Ÿä¸­æ‰€æœ‰çš„frameworkæ¯”å¦‚UIKitã€Foundationç­‰éƒ½æ˜¯ä»¥åŠ¨æ€é“¾æ¥åº“çš„æ–¹å¼é›†æˆè¿›Appä¸­çš„ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;ç³»ç»Ÿä½¿ç”¨åŠ¨æ€é“¾æ¥æœ‰å‡ ç‚¹å¥½å¤„&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;ä»£ç å…±ç”¨&lt;/strong&gt;:å¾ˆå¤šç¨‹åºéƒ½åŠ¨æ€é“¾æ¥äº†è¿™äº› libï¼Œä½†å®ƒä»¬åœ¨å†…å­˜å’Œç£ç›˜ä¸­ä¸­åªæœ‰ä¸€ä»½ã€‚ æ˜“äºç»´æŠ¤ï¼šç”±äºè¢«ä¾èµ–çš„ lib æ˜¯ç¨‹åºæ‰§è¡Œæ—¶æ‰é“¾æ¥çš„ï¼Œæ‰€ä»¥è¿™äº› lib å¾ˆå®¹æ˜“åšæ›´æ–°ï¼Œæ¯”å¦‚libSystem.dylib æ˜¯ libSystem.B.dylib çš„æ›¿èº«ï¼Œå“ªå¤©æƒ³å‡çº§ç›´æ¥æ¢æˆlibSystem.C.dylib ç„¶åå†æ›¿æ¢æ›¿èº«å°±è¡Œäº†ã€‚&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;strong&gt;å‡å°‘å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯&lt;/strong&gt;:ç›¸æ¯”é™æ€é“¾æ¥ï¼ŒåŠ¨æ€é“¾æ¥åœ¨ç¼–è¯‘æ—¶ä¸éœ€è¦æ‰“è¿›å»ï¼Œæ‰€ä»¥å¯æ‰§è¡Œæ–‡ä»¶çš„ä½“ç§¯è¦å°å¾ˆå¤šã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;http://ofnft8t2g.bkt.clouddn.com/wikiimage0.png&quot; width=&quot;400&quot; height=&quot;400&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚ä¸Šæ‰€ç¤ºï¼Œä¸åŒè¿›ç¨‹ä¹‹é—´å…±ç”¨ç³»ç»Ÿdylibçš„_TEXTåŒºï¼Œä½†æ˜¯å„è‡ªç»´æŠ¤å¯¹åº”çš„_DATAåŒºã€‚&lt;/p&gt;

&lt;p&gt;æ‰€æœ‰åŠ¨æ€é“¾æ¥åº“å’Œæˆ‘ä»¬Appä¸­çš„é™æ€åº“.aå’Œæ‰€æœ‰ç±»æ–‡ä»¶ç¼–è¯‘åçš„.oæ–‡ä»¶æœ€ç»ˆéƒ½æ˜¯ç”±dyld(the dynamic link editor)å³Appleçš„åŠ¨æ€é“¾æ¥å™¨æ¥åŠ è½½åˆ°å†…å­˜ä¸­ã€‚æ¯ä¸ªimageéƒ½æ˜¯ç”±ä¸€ä¸ªå«åšImageLoaderçš„ç±»æ¥è´Ÿè´£åŠ è½½ï¼ˆä¸€ä¸€å¯¹åº”ï¼‰ï¼Œé‚£ä¹ˆImageLoaderåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;imageloader&quot;&gt;ä»€ä¹ˆæ˜¯ImageLoader&lt;/h3&gt;

&lt;p&gt;image è¡¨ç¤ºä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶(å¯æ‰§è¡Œæ–‡ä»¶æˆ– so æ–‡ä»¶)ï¼Œé‡Œé¢æ˜¯è¢«ç¼–è¯‘è¿‡çš„ç¬¦å·ã€ä»£ç ç­‰ï¼Œæ‰€ä»¥ ImageLoader ä½œç”¨æ˜¯å°†è¿™äº›æ–‡ä»¶åŠ è½½è¿›å†…å­˜ï¼Œä¸”æ¯ä¸€ä¸ªæ–‡ä»¶å¯¹åº”ä¸€ä¸ªImageLoaderå®ä¾‹æ¥è´Ÿè´£åŠ è½½ã€‚ 
ä¸¤æ­¥èµ°ï¼š åœ¨ç¨‹åºè¿è¡Œæ—¶å®ƒå…ˆå°†åŠ¨æ€é“¾æ¥çš„ image é€’å½’åŠ è½½ (ä¹Ÿå°±æ˜¯ä¸Šé¢æµ‹è¯•æ ˆä¸­ä¸€ä¸²çš„é€’å½’è°ƒç”¨çš„æ—¶åˆ»)ã€‚ å†ä»å¯æ‰§è¡Œæ–‡ä»¶ image é€’å½’åŠ è½½æ‰€æœ‰ç¬¦å·ã€‚&lt;/p&gt;

&lt;p&gt;æ‰€æœ‰è¿™äº›éƒ½å‘ç”Ÿåœ¨æˆ‘ä»¬çœŸæ­£çš„mainå‡½æ•°æ‰§è¡Œå‰ã€‚&lt;/p&gt;

&lt;h3 id=&quot;section&quot;&gt;åŠ¨æ€é“¾æ¥åº“åŠ è½½çš„å…·ä½“æµç¨‹&lt;/h3&gt;

&lt;p&gt;åŠ¨æ€é“¾æ¥åº“çš„åŠ è½½æ­¥éª¤å…·ä½“åˆ†ä¸º5æ­¥ï¼š&lt;/p&gt;

&lt;h4 id=&quot;load-dylibs-image-&quot;&gt;&lt;strong&gt;ä¸€.load dylibs image&lt;/strong&gt; è¯»å–åº“é•œåƒæ–‡ä»¶&lt;/h4&gt;

&lt;blockquote&gt;
  &lt;p&gt;åœ¨æ¯ä¸ªåŠ¨æ€åº“çš„åŠ è½½è¿‡ç¨‹ä¸­ï¼Œdyldéœ€è¦ï¼š&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.åˆ†ææ‰€ä¾èµ–çš„åŠ¨æ€åº“
2.æ‰¾åˆ°åŠ¨æ€åº“çš„mach-oæ–‡ä»¶
3.æ‰“å¼€æ–‡ä»¶
4.éªŒè¯æ–‡ä»¶
5.åœ¨ç³»ç»Ÿæ ¸å¿ƒæ³¨å†Œæ–‡ä»¶ç­¾å
6.å¯¹åŠ¨æ€åº“çš„æ¯ä¸€ä¸ªsegmentè°ƒç”¨mmap()&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;é€šå¸¸çš„ï¼Œä¸€ä¸ªAppéœ€è¦åŠ è½½100åˆ°400ä¸ªdylibsï¼Œ ä½†æ˜¯å…¶ä¸­çš„ç³»ç»Ÿåº“è¢«ä¼˜åŒ–ï¼Œå¯ä»¥å¾ˆå¿«çš„åŠ è½½ã€‚ é’ˆå¯¹è¿™ä¸€æ­¥éª¤çš„ä¼˜åŒ–æœ‰ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.å‡å°‘éç³»ç»Ÿåº“çš„ä¾èµ–
2.åˆå¹¶éç³»ç»Ÿåº“
3.ä½¿ç”¨é™æ€èµ„æºï¼Œæ¯”å¦‚æŠŠä»£ç åŠ å…¥ä¸»ç¨‹&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;rebase-image&quot;&gt;&lt;strong&gt;Rebase image&lt;/strong&gt;&lt;/h4&gt;

&lt;p&gt;ç”±äºASLR(address space layout randomization)çš„å­˜åœ¨ï¼Œå¯æ‰§è¡Œæ–‡ä»¶å’ŒåŠ¨æ€é“¾æ¥åº“åœ¨è™šæ‹Ÿå†…å­˜ä¸­çš„åŠ è½½åœ°å€æ¯æ¬¡å¯åŠ¨éƒ½ä¸å›ºå®šï¼Œæ‰€ä»¥éœ€è¦è¿™2æ­¥æ¥ä¿®å¤é•œåƒä¸­çš„èµ„æºæŒ‡é’ˆï¼Œæ¥æŒ‡å‘æ­£ç¡®çš„åœ°å€ã€‚ rebaseä¿®å¤çš„æ˜¯æŒ‡å‘å½“å‰é•œåƒå†…éƒ¨çš„èµ„æºæŒ‡é’ˆï¼› è€ŒbindæŒ‡å‘çš„æ˜¯é•œåƒå¤–éƒ¨çš„èµ„æºæŒ‡é’ˆã€‚ 
rebaseæ­¥éª¤å…ˆè¿›è¡Œï¼Œéœ€è¦æŠŠé•œåƒè¯»å…¥å†…å­˜ï¼Œå¹¶ä»¥pageä¸ºå•ä½è¿›è¡ŒåŠ å¯†éªŒè¯ï¼Œä¿è¯ä¸ä¼šè¢«ç¯¡æ”¹ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥çš„ç“¶é¢ˆåœ¨IOã€‚bindåœ¨å…¶åè¿›è¡Œï¼Œç”±äºè¦æŸ¥è¯¢ç¬¦å·è¡¨ï¼Œæ¥æŒ‡å‘è·¨é•œåƒçš„èµ„æºï¼ŒåŠ ä¸Šåœ¨rebaseé˜¶æ®µï¼Œé•œåƒå·²è¢«è¯»å…¥å’ŒåŠ å¯†éªŒè¯ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥çš„ç“¶é¢ˆåœ¨äºCPUè®¡ç®—ã€‚ 
é€šè¿‡å‘½ä»¤è¡Œå¯ä»¥æŸ¥çœ‹ç›¸å…³çš„èµ„æºæŒ‡é’ˆ:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;xcrun dyldinfo -rebase -bind -lazy_bind myApp.App/myApp
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;ä¼˜åŒ–è¯¥é˜¶æ®µçš„å…³é”®åœ¨äºå‡å°‘__DATA segmentä¸­çš„æŒ‡é’ˆæ•°é‡ã€‚æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–çš„ç‚¹æœ‰ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.å‡å°‘Objcç±»æ•°é‡ï¼Œ å‡å°‘selectoræ•°é‡
2.å‡å°‘C++è™šå‡½æ•°æ•°é‡
3.è½¬è€Œä½¿ç”¨swift stuctï¼ˆå…¶å®æœ¬è´¨ä¸Šå°±æ˜¯ä¸ºäº†å‡å°‘ç¬¦å·çš„æ•°é‡ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h4 id=&quot;bind-image&quot;&gt;&lt;strong&gt;Bind image&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;ä¸Šéƒ¨å·²è¿å¸¦è®²è§£&lt;/p&gt;

&lt;h4 id=&quot;objc-setup&quot;&gt;&lt;strong&gt;Objc setup&lt;/strong&gt;&lt;/h4&gt;

&lt;p&gt;è¿™ä¸€æ­¥ä¸»è¦å·¥ä½œæ˜¯:
&amp;gt;1.æ³¨å†ŒObjcç±» (class registration)
&amp;gt;2.æŠŠcategoryçš„å®šä¹‰æ’å…¥æ–¹æ³•åˆ—è¡¨ (category registration)
&amp;gt;3.ä¿è¯æ¯ä¸€ä¸ªselectorå”¯ä¸€ (selctor uniquing)
ç”±äºä¹‹å‰2æ­¥éª¤çš„ä¼˜åŒ–ï¼Œè¿™ä¸€æ­¥å®é™…ä¸Šæ²¡æœ‰ä»€ä¹ˆå¯åšçš„ã€‚&lt;/p&gt;

&lt;h4 id=&quot;initializers&quot;&gt;&lt;strong&gt;initializers&lt;/strong&gt;&lt;/h4&gt;

&lt;p&gt;ä»¥ä¸Šä¸‰æ­¥å±äºé™æ€è°ƒæ•´(fix-up)ï¼Œéƒ½æ˜¯åœ¨ä¿®æ”¹__DATA segmentä¸­çš„å†…å®¹ï¼Œè€Œè¿™é‡Œåˆ™å¼€å§‹åŠ¨æ€è°ƒæ•´ï¼Œå¼€å§‹åœ¨å †å’Œå †æ ˆä¸­å†™å…¥å†…å®¹ã€‚ åœ¨è¿™é‡Œçš„å·¥ä½œæœ‰ï¼š
&amp;gt;1.Objcçš„+load()å‡½æ•°
&amp;gt;2.C++çš„æ„é€ å‡½æ•°å±æ€§å‡½æ•° å½¢å¦‚attribute((constructor)) void DoSomeInitializationWork()
&amp;gt;3.éåŸºæœ¬ç±»å‹çš„C++é™æ€å…¨å±€å˜é‡çš„åˆ›å»º(é€šå¸¸æ˜¯ç±»æˆ–ç»“æ„ä½“)(non-trivial initializer) æ¯”å¦‚ä¸€ä¸ªå…¨å±€é™æ€ç»“æ„ä½“çš„æ„å»ºï¼Œå¦‚æœåœ¨æ„é€ å‡½æ•°ä¸­æœ‰ç¹é‡çš„å·¥ä½œï¼Œé‚£ä¹ˆä¼šæ‹–æ…¢å¯åŠ¨é€Ÿåº¦
Objcçš„loadå‡½æ•°å’ŒC++çš„é™æ€æ„é€ å‡½æ•°é‡‡ç”¨ç”±åº•å‘ä¸Šçš„æ–¹å¼æ‰§è¡Œï¼Œæ¥ä¿è¯æ¯ä¸ªæ‰§è¡Œçš„æ–¹æ³•ï¼Œéƒ½å¯ä»¥æ‰¾åˆ°æ‰€ä¾èµ–çš„åŠ¨æ€åº“ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ofnft8t2g.bkt.clouddn.com/wikiimage1.png&quot; width=&quot;300&quot; height=&quot;200&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¸Šå›¾æ˜¯åœ¨è‡ªå®šä¹‰çš„ç±»XXViewControllerçš„+loadæ–¹æ³•æ–­ç‚¹çš„è°ƒç”¨å †æ ˆï¼Œæ¸…æ¥šçš„çœ‹åˆ°æ•´ä¸ªè°ƒç”¨æ ˆå’Œé¡ºåºï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.dyld å¼€å§‹å°†ç¨‹åºäºŒè¿›åˆ¶æ–‡ä»¶åˆå§‹åŒ–
2.äº¤ç”± ImageLoader è¯»å– imageï¼Œå…¶ä¸­åŒ…å«äº†æˆ‘ä»¬çš„ç±»ã€æ–¹æ³•ç­‰å„ç§ç¬¦å·
3.ç”±äº runtime å‘ dyld ç»‘å®šäº†å›è°ƒï¼Œå½“ image åŠ è½½åˆ°å†…å­˜åï¼Œdyld ä¼šé€šçŸ¥ runtime è¿›è¡Œå¤„ç†
4.runtime æ¥æ‰‹åè°ƒç”¨ mapimages åšè§£æå’Œå¤„ç†ï¼Œæ¥ä¸‹æ¥ loadimages ä¸­è°ƒç”¨ callloadmethods æ–¹æ³•ï¼Œéå†æ‰€æœ‰åŠ è½½è¿›æ¥çš„ Classï¼ŒæŒ‰ç»§æ‰¿å±‚çº§ä¾æ¬¡è°ƒç”¨ Class çš„ +load æ–¹æ³•å’Œå…¶ Category çš„ +load æ–¹æ³•&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;è‡³æ­¤ï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä¸­å’ŒåŠ¨æ€åº“æ‰€æœ‰çš„ç¬¦å·(Classï¼ŒProtocolï¼ŒSelectorï¼ŒIMPï¼Œâ€¦)éƒ½å·²ç»æŒ‰æ ¼å¼æˆåŠŸåŠ è½½åˆ°å†…å­˜ä¸­ï¼Œè¢« runtime æ‰€ç®¡ç†ï¼Œå†è¿™ä¹‹åï¼Œruntime çš„é‚£äº›æ–¹æ³•(åŠ¨æ€æ·»åŠ  Classã€swizzle ç­‰ç­‰æ‰èƒ½ç”Ÿæ•ˆ)ã€‚&lt;/p&gt;

&lt;p&gt;æ•´ä¸ªäº‹ä»¶ç”± dyld ä¸»å¯¼ï¼Œå®Œæˆè¿è¡Œç¯å¢ƒçš„åˆå§‹åŒ–åï¼Œé…åˆ ImageLoader å°†äºŒè¿›åˆ¶æ–‡ä»¶æŒ‰æ ¼å¼åŠ è½½åˆ°å†…å­˜ï¼Œ åŠ¨æ€é“¾æ¥ä¾èµ–åº“ï¼Œå¹¶ç”± runtime è´Ÿè´£åŠ è½½æˆ objc å®šä¹‰çš„ç»“æ„ï¼Œæ‰€æœ‰åˆå§‹åŒ–å·¥ä½œç»“æŸåï¼Œdyld è°ƒç”¨çœŸæ­£çš„ main å‡½æ•°ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœç¨‹åºåˆšåˆšè¢«è¿è¡Œè¿‡ï¼Œé‚£ä¹ˆç¨‹åºçš„ä»£ç ä¼šè¢«dyldç¼“å­˜ï¼Œå› æ­¤å³ä½¿æ€æ‰è¿›ç¨‹å†æ¬¡é‡å¯åŠ è½½æ—¶é—´ä¹Ÿä¼šç›¸å¯¹å¿«ä¸€ç‚¹ï¼Œå¦‚æœé•¿æ—¶é—´æ²¡æœ‰å¯åŠ¨æˆ–è€…å½“å‰dyldçš„ç¼“å­˜å·²ç»è¢«å…¶ä»–åº”ç”¨å æ®ï¼Œé‚£ä¹ˆè¿™æ¬¡å¯åŠ¨æ‰€èŠ±è´¹çš„æ—¶é—´å°±è¦é•¿ä¸€ç‚¹ï¼Œè¿™å°±åˆ†åˆ«æ˜¯çƒ­å¯åŠ¨å’Œå†·å¯åŠ¨çš„æ¦‚å¿µï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º:&lt;/p&gt;

&lt;p&gt;```&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ofnft8t2g.bkt.clouddn.com/wikiimage2.png&quot; width=&quot;300&quot; height=&quot;200&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;main-1&quot;&gt;main()å‡½æ•°ä¹‹å‰çš„åŠ è½½æ—¶é—´è¡¡é‡&lt;/h3&gt;

&lt;p&gt;è‹¹æœå®˜æ–¹æä¾›äº†ä¸€ç§æ–¹æ³•ï¼Œé‚£å°±æ˜¯åœ¨çœŸæœºè°ƒè¯•çš„æ—¶å€™å‹¾é€‰dyldPRINTSTATISTICSé€‰é¡¹ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ofnft8t2g.bkt.clouddn.com/wikiimage3.png&quot; width=&quot;500&quot; height=&quot;300&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ä¼šå¾—åˆ°å¦‚ä¸‹å½¢å¼çš„è¾“å‡º:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ofnft8t2g.bkt.clouddn.com/wikiimage4.png&quot; width=&quot;400&quot; height=&quot;300&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¯¹äºç³»ç»Ÿçº§åˆ«çš„åŠ¨æ€é“¾æ¥åº“ï¼Œå› ä¸ºè‹¹æœåšäº†ä¼˜åŒ–ï¼Œæ‰€ä»¥è€—æ—¶å¹¶ä¸å¤šï¼Œåœ¨è¿™ä¸ªawesomeçš„ä¾‹å­ä¸­ï¼Œè‡ªèº«Appä¸­çš„ä»£ç å ç”¨äº†æ•´ä½“æ—¶é—´çš„94.2% æˆ‘ä»¬åº”ç”¨ä¸­ä¸€æ¬¡å…¸å‹çš„Logå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://ofnft8t2g.bkt.clouddn.com/wikiimage5.png&quot; width=&quot;500&quot; height=&quot;300&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç”±æ­¤å¯è§ï¼Œæœ€å¤šçš„ç”¨æ—¶è¿˜æ˜¯åœ¨imageåŠ è½½å’ŒOCç±»çš„åˆå§‹åŒ–ï¼Œå…±å ç”¨æ€»æ—¶é•¿çš„79.3%ï¼Œç²¾ç®€frameworkçš„å¼•å…¥å’ŒOCç±»æœ‰ä¼˜åŒ–çš„ç©ºé—´ã€‚&lt;/p&gt;

&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼šå¯¹äºmain()è°ƒç”¨ä¹‹å‰çš„è€—æ—¶æˆ‘ä»¬å¯ä»¥ä¼˜åŒ–çš„ç‚¹æœ‰ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;1.å‡å°‘ä¸å¿…è¦çš„frameworkï¼Œå› ä¸ºåŠ¨æ€é“¾æ¥æ¯”è¾ƒè€—æ—¶
2.check frameworkåº”å½“è®¾ä¸ºoptionalå’Œrequiredï¼Œå¦‚æœè¯¥frameworkåœ¨å½“å‰Appæ”¯æŒçš„æ‰€æœ‰iOSç³»ç»Ÿç‰ˆæœ¬éƒ½å­˜åœ¨ï¼Œé‚£ä¹ˆå°±è®¾ä¸ºrequiredï¼Œå¦åˆ™å°±è®¾ä¸ºoptionalï¼Œå› ä¸ºoptionalä¼šæœ‰äº›é¢å¤–çš„æ£€æŸ¥
3.åˆå¹¶æˆ–è€…åˆ å‡ä¸€äº›OCç±»ï¼Œå…³äºæ¸…ç†é¡¹ç›®ä¸­æ²¡ç”¨åˆ°çš„ç±»ï¼Œä½¿ç”¨å·¥å…·AppCodeä»£ç æ£€æŸ¥åŠŸèƒ½ï¼ŒæŸ¥åˆ°å½“å‰é¡¹ç›®ä¸­æ²¡æœ‰ç”¨åˆ°çš„ç±»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;img src=&quot;http://ofnft8t2g.bkt.clouddn.com/wikiimage6_new.png&quot; width=&quot;500&quot; height=&quot;350&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;ç„¶åå¤„ç†æ­¥éª¤å¤§æ¦‚å¦‚ä¸‹ï¼š
a.åˆ å‡ä¸€äº›æ— ç”¨çš„é™æ€å˜é‡
b.åˆ å‡æ²¡æœ‰è¢«è°ƒç”¨åˆ°æˆ–è€…å·²ç»åºŸå¼ƒçš„æ–¹æ³•
æ–¹æ³•è§ï¼š
&amp;gt;http://stackoverflow.com/questions/35233564/how-to-find-unused-code-in-xcode-7
&amp;gt;https://developer.Apple.com/library/ios/documentation/ToolsLanguages/Conceptual/Xcode_Overview/CheckingCodeCoverage.html
c.å°†ä¸å¿…é¡»åœ¨+loadæ–¹æ³•ä¸­åšçš„äº‹æƒ…å»¶è¿Ÿåˆ°+initializeä¸­
d.å°½é‡ä¸è¦ç”¨C++è™šå‡½æ•°(åˆ›å»ºè™šå‡½æ•°è¡¨æœ‰å¼€é”€)&lt;/p&gt;

&lt;h3 id=&quot;main-2&quot;&gt;mainå‡½æ•°ä¹‹ååŠ è½½æ—¶é—´ä¼˜åŒ–è®°å½•&lt;/h3&gt;

&lt;p&gt;NSUserDefaultsæ˜¯å¦æ˜¯ç“¶é¢ˆ?
è‹¹æœå®˜æ–¹æ–‡æ¡£æåˆ°NSUserDefaultsåŠ è½½çš„æ—¶å€™æ˜¯æ•´ä¸ªplisté…ç½®æ–‡ä»¶å…¨éƒ¨loadåˆ°å†…å­˜ä¸­ï¼Œä½†æ˜¯æµ‹è¯•ç»“æœæ˜¾ç¤ºå¹¶ä¸ä¼šã€‚ é€šè¿‡ç¬¦å·æ–­ç‚¹+[NSUserDefaults standardUserDefaults]ç¡®å®šæœ€æ—©ä¸€æ¬¡çš„+load()ä»æ‰§è¡Œåˆ°ç»“æŸè€—æ—¶1.8msï¼Œå¯è§NSUserDefaultsçš„åˆå§‹åŒ–ä»…è€—æ—¶1.8msï¼Œå¹¶ä¸æ˜¯å¯åŠ¨è€—æ—¶çš„ç“¶é¢ˆã€‚&lt;/p&gt;

&lt;p&gt;ä¸ºäº†æ‰¾åˆ°ç“¶é¢ˆï¼Œåœ¨å¯åŠ¨ä¹‹åçš„didFinishLauhcningæ–¹æ³•å¼€å§‹æ‰§è¡Œåˆ°é¦–é¡µåˆ—è¡¨é¡µçš„WZMainViewControllerçš„viewDidAppearæ–¹æ³•ï¼Œå‡ ä¹æ¯ä¸ªå¯èƒ½æ¯”è¾ƒè€—æ—¶çš„æµç¨‹è¿›è¡Œæ‹†åˆ†å’Œç»Ÿè®¡ï¼Œå¾—åˆ°ç»Ÿè®¡æ•°æ®ä¹‹åå‘ç°ï¼š ä¸»è¦è€—æ—¶åœ¨é¦–é¡µUIæ„é€ å’Œæ¸²æŸ“(storyboardåŠ è½½ï¼ŒtabBar/topBaræ¸²æŸ“ï¼Œå¼€å±å¹¿å‘ŠåŠ è½½/cellæ³¨å†Œ/æ—¥å¿—æ¨¡å—åˆå§‹åŒ–è¿™å‡ ä¸ªæ­¥éª¤)ã€‚&lt;/p&gt;

&lt;h4 id=&quot;section-1&quot;&gt;&lt;strong&gt;å…·ä½“ä¼˜åŒ–ç‚¹&lt;/strong&gt;&lt;/h4&gt;

&lt;p&gt;1.çº¯ä»£ç æ–¹å¼è€Œä¸æ˜¯storyboardåŠ è½½é¦–é¡µUIã€‚
2.å¯¹didFinishLaunchingé‡Œçš„å‡½æ•°è€ƒè™‘èƒ½å¦æŒ–æ˜å¯ä»¥å»¶è¿ŸåŠ è½½æˆ–è€…æ‡’åŠ è½½ï¼Œéœ€è¦ä¸å„ä¸ªä¸šåŠ¡æ–¹pmå’Œrdå…±åŒcheck å¯¹äºä¸€äº›å·²ç»ä¸‹çº¿çš„ä¸šåŠ¡ï¼Œåˆ å‡å†—ä½™ä»£ç ã€‚å¯¹äºä¸€äº›ä¸UIå±•ç¤ºæ— å…³çš„ä¸šåŠ¡ï¼Œå¦‚å¾®åšè®¤è¯è¿‡æœŸæ£€æŸ¥ã€å›¾ç‰‡æœ€å¤§ç¼“å­˜ç©ºé—´è®¾ç½®ç­‰åšå»¶è¿ŸåŠ è½½
3.å¯¹å®ç°äº†+load()æ–¹æ³•çš„ç±»è¿›è¡Œåˆ†æï¼Œå°½é‡å°†loadé‡Œçš„ä»£ç å»¶åè°ƒç”¨ã€‚
4.ä¸Šé¢ç»Ÿè®¡æ•°æ®æ˜¾ç¤ºå±•ç¤ºfeedçš„å¯¼èˆªæ§åˆ¶å™¨é¡µé¢(WZMainViewController)æ¯”è¾ƒè€—æ—¶ï¼Œå¯¹äºviewDidLoadä»¥åŠviewWillAppearæ–¹æ³•ä¸­å°½é‡å»å°è¯•å°‘åšï¼Œæ™šåšï¼Œä¸åšã€‚&lt;/p&gt;

</description>
        <pubDate>Mon, 15 May 2017 16:08:13 +0800</pubDate>
        <link>/2017/05/iOS%E5%90%AF%E5%8A%A8%E9%80%9F%E5%BA%A6%E7%9A%84%E4%BC%98%E5%8C%96/</link>
        <guid isPermaLink="true">/2017/05/iOS%E5%90%AF%E5%8A%A8%E9%80%9F%E5%BA%A6%E7%9A%84%E4%BC%98%E5%8C%96/</guid>
        
        <category>ä¼˜åŒ–</category>
        
        <category>å¯åŠ¨é€Ÿåº¦</category>
        
        <category>iOSå¯åŠ¨é€Ÿåº¦çš„ä¼˜åŒ–</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>iOSçš„httpsè®¤è¯(äºŒ)</title>
        <description>&lt;p&gt;ä¸Šç¯‡æ–‡ç« è®²äº†iOSå’ŒæœåŠ¡å™¨å¦‚ä½•ä»å®˜æ–¹æœºæ„è¯·æ±‚CAè¯ä¹¦è¿›è¡Œhttpsé…ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬æ¥è®²è®²å¦‚ä½•è‡ªå»ºè¯ä¹¦æ¥é…ç½®httpsï¼Œé’ˆå¯¹AFNetworkingç½‘ç»œæ¡†æ¶å’Œè‹¹æœè‡ªå¸¦æ¡†æ¶NSURLConnectionã€‚&lt;/p&gt;

&lt;h3 id=&quot;afnetworking&quot;&gt;AFNetworking&lt;/h3&gt;

&lt;p&gt;1.æŠŠæœåŠ¡å™¨ç»™ä½ çš„è‡ªç­¾è¯çš„è¯ä¹¦æ”¾å…¥bundleä¸€èˆ¬æ˜¯.ceræ–‡ä»¶&lt;/p&gt;

&lt;p&gt;2.åˆ›å»ºafnnetworking å®‰å…¨ç­–ç•¥å¯¹è±¡,å¹¶è®¾ç½®å‘èµ·è¯·æ±‚managerçš„å®‰å…¨ç­–ç•¥å±æ€§.è®¾ç½®äº†å®‰å…¨ç­–ç•¥å±æ€§,afnnetworkingä¼šè‡ªåŠ¨æ‰«æbundlé‡Œçš„è¯ä¹¦.&lt;/p&gt;

&lt;p&gt;3.æœ€å‘çš„æ˜¯ iOS9æ–°å‡ºçš„App Transport Security ä¹Ÿå°±æ˜¯è¦æˆ‘ä»¬æŠŠæ‰€æœ‰è¯·æ±‚ä» HTTPæ”¹æˆHTTPSçš„å®¶ä¼™, å®ƒç«Ÿç„¶ä¸è®¤è‡ªç­¾è¯çš„è¯ä¹¦. è‹¹æœå¤§çˆ·éš¾é“çœŸæ˜¯åœŸè±ªæƒ¯äº†,ä»¥ä¸ºæˆ‘ä»¬å¼€å‘è€…éƒ½ä¼šä¹°caçš„è¯ä¹¦å—. è§£å†³åŠæ³•å°±æ˜¯é‚£é‡Œè¿˜æ˜¯è¦è®¾ç½®åœ¨Info.plistä¸­æ·»åŠ NSAppTransportSecurityç±»å‹Dictionaryåœ¨NSAppTransportSecurityä¸‹æ·»åŠ NSAllowsArbitraryLoadsç±»å‹ Boolean,å€¼è®¾ä¸ºYES&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;NSString *cerPath = [[NSBundle mainBundle] pathForResource:@&quot;https&quot; ofType:@&quot;cer&quot;];

NSData *certData = [NSData dataWithContentsOfFile:cerPath];

//AFSSLPinningModeCertificate ä½¿ç”¨è¯ä¹¦éªŒè¯æ¨¡å¼

AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeCertificate];

//allowInvalidCertificates æ˜¯å¦å…è®¸æ— æ•ˆè¯ä¹¦ï¼ˆä¹Ÿå°±æ˜¯è‡ªå»ºçš„è¯ä¹¦ï¼‰ï¼Œé»˜è®¤ä¸ºNO

//å¦‚æœæ˜¯éœ€è¦éªŒè¯è‡ªå»ºè¯ä¹¦ï¼Œéœ€è¦è®¾ç½®ä¸ºYES

securityPolicy.allowInvalidCertificates = YES;

securityPolicy.validatesDomainName = NO;

NSSet *set = [[NSSet alloc] initWithObjects:certData, nil];

securityPolicy.pinnedCertificates = set;

AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];

manager.requestSerializer = [AFJSONRequestSerializer serializer];

manager.responseSerializer=[AFJSONResponseSerializer serializer];

manager.responseSerializer.acceptableContentTypes = [manager.responseSerializer.acceptableContentTypes setByAddingObject:@&quot;text/html&quot;];

[manager setSecurityPolicy:securityPolicy];
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h3 id=&quot;nsurlconnection&quot;&gt;NSURLConnection&lt;/h3&gt;

&lt;p&gt;NSURLConnection ä½¿ç”¨è‡ªç­¾è¯è¯ä¹¦æ”¯æŒHTTPS,åªéœ€è¦åœ¨å®ç°NSURLConnectionçš„ä»£ç†æ–¹æ³•å³å¯. å‚è€ƒ&lt;a href=&quot;https://gist.github.com/JacksonTian/5855751&quot;&gt;GitHub JacksonTian&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace{

    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
{
    static CFArrayRef certs;
    if (!certs) {
        //åˆ›å»ºè¯ä¹¦data
        NSData*certData =[NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@&quot;HTTPS&quot; ofType:@&quot;cer&quot;]];

        SecCertificateRef rootcert = SecCertificateCreateWithData(kCFAllocatorDefault,CFBridgingRetain(certData));
        const void *array[1] = { rootcert };
        certs = CFArrayCreate(NULL, array, 1, &amp;amp;kCFTypeArrayCallBacks);
//        CFRelease(rootcert);    // for completeness, really does not matter
    }

    SecTrustRef trust = [[challenge protectionSpace] serverTrust];
    int err;
    SecTrustResultType trustResult = 0;
    err = SecTrustSetAnchorCertificates(trust, certs);
    if (err == noErr) {
        err = SecTrustEvaluate(trust,&amp;amp;trustResult);
    }
//    BOOL trusted = (err == noErr) &amp;amp;&amp;amp; ((trustResult == kSecTrustResultProceed)||(trustResult == kSecTrustResultConfirm) || (trustResult == kSecTrustResultUnspecified));
    BOOL trusted = (err == noErr) &amp;amp;&amp;amp; ((trustResult == kSecTrustResultProceed) || (trustResult == kSecTrustResultUnspecified));

    if (trusted) {

        [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
    }
    else{

        [challenge.sender cancelAuthenticationChallenge:challenge];
    }

//CFRelease(trust);

}
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

</description>
        <pubDate>Thu, 11 May 2017 22:08:13 +0800</pubDate>
        <link>/2017/05/iOS%E7%9A%84https%E8%AE%A4%E8%AF%81-%E4%BA%8C/</link>
        <guid isPermaLink="true">/2017/05/iOS%E7%9A%84https%E8%AE%A4%E8%AF%81-%E4%BA%8C/</guid>
        
        <category>ç½‘ç»œ</category>
        
        <category>https</category>
        
        <category>iOSçš„httpsè®¤è¯(äºŒ)</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>iOSçš„httpsè®¤è¯(ä¸€)</title>
        <description>&lt;p&gt;è‹¹æœå®˜æ–¹åœ¨2017å¹´å¹´åˆè¦æ±‚APPå¿…é¡»é…ç½®httpsï¼ˆè¿™é‡Œå¯ä»¥ä»&lt;a href=&quot;https://onevcat.com/2016/06/ios-10-ats/&quot;&gt;å–µç¥çš„åšå®¢&lt;/a&gt;äº†è§£ï¼‰ï¼Œå¯æ˜¯åæ¥ä¸çŸ¥å•¥åŸå› ææµ…äº†ï¼Œä½†è¿™ä¸ªä¸œè¥¿ç»ˆç©¶è¿˜æ˜¯è¦åšçš„ã€‚ä¸ç„¶éšä¾¿ä¸€ä¸ªæŠ“åŒ…å·¥å…·ï¼ˆcharlesç­‰ï¼‰éšéšä¾¿ä¾¿å°±èƒ½æŠ“åˆ°ä½ æ‰€è¯·æ±‚çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®å¦‚æœæ˜¯æ˜ç çš„åæœå¾ˆä¸¥é‡ï¼ˆä¸æ˜¯æŒ‡æ˜æ–‡ï¼‰ï¼Œå¯ä»¥é€šè¿‡è¿™äº›æ•°æ®æ¥åˆ¤å®šæœåŠ¡ç«¯éƒ¨ç½²çš„æ•°æ®æ¥å£ï¼Œæ›´èƒ½å¤Ÿå—…æ¢åˆ°æœåŠ¡ç«¯çš„æ¼æ´ã€‚è€Œç°åœ¨ç»å¤§éƒ¨åˆ†APPä½¿ç”¨çš„éƒ½æ˜¯AFNetworkingè¿™ä¸ªç½‘ç»œæ¡†æ¶ï¼Œæˆ‘ä»¬å°±å¯¹AFNetworkingå¦‚ä½•é…ç½®httpsæ¥åšæ¢è®¨ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æœåŠ¡å™¨ç«¯å¦‚ä½•å®ç°https&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œå°±ä¸åœ¨èµ˜è¿°httpsçš„åŸç†äº†ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šä»‹ç»çš„æ–‡ç« ã€‚httpsä¹‹æ‰€ä»¥å®‰å…¨æ˜¯å› ä¸ºå®ƒé‡‡ç”¨äº†SSL/TLSåè®®çš„å…¬é’¥åŠ å¯†æ³•ï¼Œå…¶è¿è¡Œçš„åŸºæœ¬æµç¨‹æ˜¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;å®¢æˆ·ç«¯å‘æœåŠ¡å™¨ç«¯ç´¢è¦å¹¶éªŒè¯å…¬é’¥ï¼›&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åŒæ–¹åå•†ç”Ÿæˆâ€å¯¹è¯å¯†é’¥â€ï¼›&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;åŒæ–¹é‡‡ç”¨â€å¯¹è¯å¯†é’¥â€è¿›è¡ŒåŠ å¯†é€šä¿¡ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…¶ä¸­ï¼Œç¬¬1å’Œ2æ­¥è¢«ç§°ä¸ºæ¡æ‰‹é˜¶æ®µã€‚æ¡æ‰‹é˜¶æ®µçš„ç»†èŠ‚è¿™é‡Œå°±ä¸èµ˜è¿°ï¼Œæˆ‘ä»¬åªéœ€è¦çŸ¥é“ï¼Œé€šè¿‡æ¡æ‰‹é˜¶æ®µï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸»è¦äº¤æ¢äº†3ä¸ªä¿¡æ¯ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;1ï¼Œæ•°å­—è¯ä¹¦ã€‚è¯¥ä¿¡æ¯æ˜¯æˆ‘ä»¬è¿›è¡Œå¼€å‘éœ€è¦å…³æ³¨çš„ï¼æ•°å­—è¯ä¹¦åŒ…å«äº†å…¬é’¥ç­‰ä¿¡æ¯ï¼Œä¸€èˆ¬ç”±æœåŠ¡å™¨å‘ç»™å®¢æˆ·ç«¯ï¼Œæ¥æ”¶æ–¹é€šè¿‡éªŒè¯è¿™ä¸ªè¯ä¹¦æ˜¯ä¸æ˜¯ç”±ä¿¡èµ–çš„CAç­¾å‘ï¼Œæˆ–è€…ä¸æœ¬åœ°çš„è¯ä¹¦ç›¸å¯¹æ¯”ï¼Œæ¥åˆ¤æ–­è¯ä¹¦æ˜¯å¦å¯ä¿¡ï¼›å‡å¦‚éœ€è¦åŒå‘éªŒè¯ï¼Œåˆ™æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½éœ€è¦å‘é€æ•°å­—è¯ä¹¦ç»™å¯¹æ–¹éªŒè¯ï¼›&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;2ï¼Œ3ä¸ªéšæœºæ•°ã€‚3ä¸ªéšæœºæ•°æ˜¯ç”¨äºç”Ÿæˆå¯¹è¯å¯†é’¥çš„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒè¿™ç»†èŠ‚ï¼›&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;3ï¼ŒåŠ å¯†é€šä¿¡åè®®ã€‚å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯é€šä¿¡éœ€è¦é‡‡å–åŒæ ·çš„åŠ å¯†é€šä¿¡åè®®ï¼Œæˆ‘ä»¬ä¹Ÿä¸éœ€è¦å¤ªå…³æ³¨ã€‚&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;æ‰€ä»¥å’±ä»¬éœ€è¦åšçš„å°±æ˜¯æ‹¿åˆ°æ•°å­—è¯ä¹¦&lt;a href=&quot;http://kb.cnblogs.com/page/194742/&quot;&gt;æ•°å­—è¯ä¹¦åŠCA&lt;/a&gt;ï¼Œè¿™é‡Œæœ‰ä¸¤ç§æ–¹å¼ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;å‘å®˜æ–¹CAè®¤è¯æœºæ„ç”³è¯·è¯ä¹¦&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;è‡ªå»ºè¯ä¹¦ï¼Œé…ç½®ç»™æœåŠ¡å™¨&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¬¬ä¸€ç§æ–¹æ³•æ˜¯æœ€ä¼˜çš„ï¼Œå»ºç«‹ç½‘ç«™çš„è¯ï¼Œç›´æ¥å°±ä¼šè¢«ä¿¡ä»»ã€‚è€ŒæœåŠ¡å™¨ä½œä¸ºç§»åŠ¨ç«¯appçš„æœåŠ¡å™¨æ—¶ï¼Œä¹Ÿä¸éœ€è¦ä¸ºATSåšè¿‡å¤šçš„é€‚é…ï¼ˆæ­£æ˜¯æˆ‘æ‰€éœ€è¦ç§¯ç´¯çŸ¥è¯†çš„æ–¹å‘ï¼‰ã€‚è™½ç„¶è¯´æƒå¨çš„æœºæ„è®¤è¯éƒ½æ˜¯éœ€è¦é’±çš„ï¼Œä½†æ˜¯å¦‚ä»Šä¹Ÿä¸ä¹å­˜åœ¨å…è´¹çš„ç¬¬ä¸‰æ–¹è®¤è¯æœºæ„ã€‚&lt;/p&gt;

&lt;p&gt;ç¬¬äºŒç§æ–¹æ³•è™½ç„¶å¯¹äºappå’ŒæœåŠ¡å™¨é—´çš„é€šè®¯æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å¦‚æœä»ç½‘ç«™æ‰“å¼€é“¾æ¥æ—¶ä¼šå¼¹å‡ºä¸€ä¸ªè­¦å‘Šæé†’ï¼Œæé†’è¿™æ˜¯ä¸€ä¸ªä¸å—ä¿¡ä»»çš„ç½‘ç«™ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨è®¾ç½®ä¿¡ä»»æ‰è¡Œï¼Œè¿™ç§ä½“éªŒä¼šè®©ç”¨æˆ·æ„Ÿè§‰ç½‘ç«™ä¸å®‰å…¨ã€‚è€Œå®¢æˆ·ç«¯é…ç½®æ—¶éœ€è¦å°†info.plistæ–‡ä»¶ä¸­å°†App Transport Security Settingsä¸­çš„Allow Arbitrary Loadsè®¾ç½®ä¸ºYESæˆ–è€…åœ¨App Transport Security Settingsä¸‹æ·»åŠ ç™½åå•ï¼ˆæ–°å¢Exception Domainsé€‰é¡¹ï¼Œå°†è‡ªå·±æœåŠ¡å™¨çš„åŸŸåæ”¾è¿›å»ï¼‰ï¼Œè¿™é‡Œæˆ‘è¦è¯´çš„æ˜¯è®¸å¤šäººä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€æ˜¯ç›´æ¥å°†Allow Arbitrary Loadsè®¾ç½®ä¸ºYESï¼Œè¿™ç§è®¾ç½®ä¼šä¿¡ä»»å…¶ä»–æ‰€æœ‰çš„httpè¯·æ±‚ï¼Œç›¸å½“äºhttpsç™½åšäº†ï¼Œæ‰€ä»¥åè€…æ‰æ˜¯å¯å–çš„ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªæ–¹æ³•å¯ä»¥å¿«é€Ÿæ£€æµ‹æœåŠ¡å™¨çš„httpsç‰¹æ€§æ˜¯å¦ç¬¦åˆATSçš„è¦æ±‚ï¼š
æ§åˆ¶å°è¾“å…¥&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nscurl --ats-diagnostics --verbose https://example.com
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¿™ä¸ª&lt;code class=&quot;highlighter-rouge&quot;&gt;https://example.com&lt;/code&gt;å°±æ˜¯ä½ æƒ³æ£€æµ‹çš„åŸŸåï¼Œå’±ä»¬æ¥è¯•è¯•çŸ¥ä¹&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nscurl --ats-diagnostics --verbose https://www.zhihu.com
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;è¾“å‡ºå¦‚ä¸‹ï¼š&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Starting ATS Diagnostics

Configuring ATS Info.plist keys and displaying the result of HTTPS loads to https://www.zhihu.com.
A test will &quot;PASS&quot; if URLSession:task:didCompleteWithError: returns a nil error.
================================================================================

Default ATS Secure Connection

---
ATS Default Connection
ATS Dictionary:
{
}
Result : PASS
---

================================================================================

Allowing Arbitrary Loads

---
Allow All Loads
ATS Dictionary:
{
    NSAllowsArbitraryLoads = true;
}
Result : PASS
---

================================================================================

Configuring TLS exceptions for www.zhihu.com

---
TLSv1.2
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionMinimumTLSVersion = &quot;TLSv1.2&quot;;
        };
    };
}
Result : PASS
---

---
TLSv1.1
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionMinimumTLSVersion = &quot;TLSv1.1&quot;;
        };
    };
}
Result : PASS
---

---
TLSv1.0
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionMinimumTLSVersion = &quot;TLSv1.0&quot;;
        };
    };
}
Result : PASS
---

================================================================================

Configuring PFS exceptions for www.zhihu.com

---
Disabling Perfect Forward Secrecy
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---

================================================================================

Configuring PFS exceptions and allowing insecure HTTP for www.zhihu.com

---
Disabling Perfect Forward Secrecy and Allowing Insecure HTTP
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionAllowsInsecureHTTPLoads = true;
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---

================================================================================

Configuring TLS exceptions with PFS disabled for www.zhihu.com

---
TLSv1.2 with PFS disabled
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionMinimumTLSVersion = &quot;TLSv1.2&quot;;
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---

---
TLSv1.1 with PFS disabled
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionMinimumTLSVersion = &quot;TLSv1.1&quot;;
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---

---
TLSv1.0 with PFS disabled
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionMinimumTLSVersion = &quot;TLSv1.0&quot;;
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---

================================================================================

Configuring TLS exceptions with PFS disabled and insecure HTTP allowed for www.zhihu.com

---
TLSv1.2 with PFS disabled and insecure HTTP allowed
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionAllowsInsecureHTTPLoads = true;
            NSExceptionMinimumTLSVersion = &quot;TLSv1.2&quot;;
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---

---
TLSv1.1 with PFS disabled and insecure HTTP allowed
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionAllowsInsecureHTTPLoads = true;
            NSExceptionMinimumTLSVersion = &quot;TLSv1.1&quot;;
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---

---
TLSv1.0 with PFS disabled and insecure HTTP allowed
ATS Dictionary:
{
    NSExceptionDomains =     {
        &quot;www.zhihu.com&quot; =         {
            NSExceptionAllowsInsecureHTTPLoads = true;
            NSExceptionMinimumTLSVersion = &quot;TLSv1.0&quot;;
            NSExceptionRequiresForwardSecrecy = false;
        };
    };
}
Result : PASS
---
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;p&gt;å¯ä»¥çœ‹åˆ°çŸ¥ä¹åœ¨æ‰€æœ‰æµ‹è¯•ä¸­çš„ç»“æœéƒ½æ˜¯PASSï¼ŒçŸ¥ä¹å¯¹ç”¨æˆ·çš„ä¿¡æ¯å®‰å…¨ä¿æŠ¤å·¥ä½œåšå¾—è¿˜æ˜¯ä¸é”™çš„ï¼Œèµï¼è‡ªå·±çš„æœåŠ¡å™¨é…ç½®å¥½äº†httpsåä¹Ÿå¯ä»¥ç”¨è¿™ä¸ªæ¥è¿›è¡Œå°è¯•ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;iOSç«¯å¦‚ä½•å®ç°https&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;åŸºäºå¯¹HTTPSè¿è¡Œæœºåˆ¶çš„ç†è§£ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œåœ¨iOSå®¢æˆ·ç«¯å®ç°ä¸æœåŠ¡å™¨çš„httpsé€šä¿¡ï¼Œå‰ææ¡ä»¶æ˜¯ä½ çš„æœåŠ¡å™¨æ˜¯ä¸€ä¸ªæä¾›äº†httpsçš„æœåŠ¡å™¨ã€‚å¦‚æœå‰æå¾—ä»¥æ»¡è¶³ï¼Œé‚£ä¹ˆiOSå®¢æˆ·ç«¯å°±éœ€è¦å‘æœåŠ¡å™¨å‘å‡ºè¯·æ±‚ç´¢è¦å…¬é’¥ï¼Œè€ŒåéªŒè¯å…¬é’¥ï¼Œç„¶åè¿›è¡Œæ¡æ‰‹ï¼Œæœ€åå¼€å§‹åŠ å¯†é€šä¿¡ã€‚é‚£ä¹ˆï¼Œå…·ä½“æ€ä¹ˆåšå‘¢ï¼Ÿéš¾å€’è¿™äº›éƒ½éœ€è¦æˆ‘è‡ªå·±å®ç°å—ï¼Ÿè‚¯å®šä¸æ˜¯çš„ï¼Œè¿™ç§åŸºç¡€æ€§å·¥ä½œï¼Œè‹¹æœæ—©å°±åšå¥½äº†ï¼Œè‘—åçš„ç¬¬ä¸‰æ–¹åº“AFNetworkingä¹Ÿæ—©å°±åšå¥½äº†ã€‚&lt;/p&gt;

&lt;p&gt;1.åˆ é™¤æ‰info.plistæ–‡ä»¶ä¸­App Transport Security SettingsåŠå…¶å­é¡¹Allow Arbitrary Loadsï¼Œè®©ATSæ¢å¤åˆ°é»˜è®¤çŠ¶æ€ã€‚&lt;/p&gt;

&lt;p&gt;2.ä¿®æ”¹ä¸»åŸŸåä¸ºé¡¹ç›®çš„httpsåŸŸå&lt;/p&gt;

&lt;p&gt;ç”±æ­¤å¯çŸ¥ï¼Œå¯¹äºç¬¦åˆATSè¦æ±‚çš„HTTPSæœåŠ¡å™¨ï¼Œåœ¨iOSç«¯ä¸éœ€è¦å¯¹ATSåšç‰¹æ®Šçš„é€‚é…å°±èƒ½å’ŒHTTPSæœåŠ¡å™¨è¿›è¡Œé€šä¿¡ã€‚è€Œè¦ç¬¦åˆATSè¦æ±‚ï¼Œåˆ™éœ€è¦è€è€å®å®åœ°åˆ›å»ºè¯ä¹¦è¯·æ±‚ï¼Œç„¶ååˆ°æƒå¨æœºæ„è®¤è¯ï¼Œéšä¹‹é…ç½®åˆ°æœåŠ¡å™¨ã€‚æ˜¯ä¸æ˜¯è¶…çº§ç®€å•ï¼Ÿ&lt;/p&gt;

&lt;p&gt;å¯¹äºè‡ªå»ºè¯ä¹¦çš„æ–¹æ³•å’Œé…ç½®ä¸‹ç¯‡æ–‡ç« å†è®²ã€‚&lt;/p&gt;

</description>
        <pubDate>Thu, 11 May 2017 16:08:13 +0800</pubDate>
        <link>/2017/05/iOS%E7%9A%84https%E8%AE%A4%E8%AF%81-%E4%B8%80/</link>
        <guid isPermaLink="true">/2017/05/iOS%E7%9A%84https%E8%AE%A4%E8%AF%81-%E4%B8%80/</guid>
        
        <category>ç½‘ç»œ</category>
        
        <category>https</category>
        
        <category>iOSçš„httpsè®¤è¯(ä¸€)</category>
        
        
        <category>study</category>
        
      </item>
    
      <item>
        <title>iOSçš„é™æ€ä¸åŠ¨æ€å†…å­˜åˆ†æ</title>
        <description>&lt;p&gt;è¿‘æ®µæ—¶é—´appå¤„äºä¼˜åŒ–é˜¶æ®µï¼Œå‘ç°åœ¨ä¸€äº›åˆ—è¡¨é¡µé¢æŸ¥çœ‹æ•°æ®ä¹…ä¸€ç‚¹å°±ä¼šå‡ºç°è«åå…¶å¦™çš„å´©æºƒã€‚è¿ä¸ŠXcodeä¸€æŸ¥ï¼Œä¹Ÿä¸æ˜¯å¿…ç°ï¼Œä½†é¢‘ç‡æ¯”è¾ƒé«˜ï¼Œè€Œä¸”æ²¡æœ‰å´©æºƒæç¤ºï¼Œæ˜¯æ‰‹æœºå’ŒXcodeç›´æ¥æ–­å¼€è¿æ¥ã€‚å†çœ‹ç€æ€§èƒ½æŒ‡ç¤ºè¿›è¡Œæ“ä½œï¼Œæœä¸å…¶ç„¶ï¼Œæ¯æ¬¡å†…å­˜é£™å‡åˆ°ä¸€å®šç¨‹åº¦å°±ä¼šå´©æºƒã€‚ä¸€ä¸ªappæƒ³è¦èµ°å‘æˆç†Ÿï¼Œè¿™ç§é—®é¢˜å¿…é¡»è§£å†³ï¼Œè¿™é‡Œå°±éœ€è¦è°ˆåˆ°iOSçš„é™æ€ä¸åŠ¨æ€å†…å­˜åˆ†æ&lt;/p&gt;

&lt;h3 id=&quot;section&quot;&gt;é™æ€å†…å­˜åˆ†æ&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ä¼˜ç‚¹&lt;/code&gt;ï¼šåˆ†æå†…å­˜éå¸¸å¿«ï¼Œå·²ç»å¯ä»¥å¯¹æ•´ä¸ªé¡¹ç›®çš„å†…å­˜è¿›è¡Œåˆ†æã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ç¼ºç‚¹&lt;/code&gt;ï¼šä¸è¿è¡Œç¨‹åºï¼Œç›´æ¥å¯¹ä»£ç è¿›è¡Œåˆ†æã€‚æ ¹æ®ä»£ç çš„ä¸Šä¸‹æ–‡è¯­æ³•ç»“æ„ï¼Œçœ‹è¯­æ³•æ˜¯å¦æœ‰é—®é¢˜ã€‚ï¼ˆä¸å¤Ÿå‡†ç¡®ï¼Œä½†æ˜¯å¦‚æœé€šè¿‡é™æ€å†…å­˜åˆ†æï¼Œæœ‰æç¤ºå‡ºç°äº†å†…å­˜æ³„éœ²ï¼Œéœ€è¦é€šè¿‡åˆ†æä»£ç ä¸Šä¸‹æ–‡æŸ¥çœ‹æ˜¯å¦æœ‰å†…å­˜æ³„éœ²ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;å¿«æ·é”®&lt;/code&gt;ï¼šcommand +shift +b&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;è¿›è¡Œæ–¹å¼&lt;/code&gt;ï¼šProduct â€“ &amp;gt; Analyze&lt;/p&gt;

&lt;h3 id=&quot;instrument&quot;&gt;åŠ¨æ€å†…å­˜åˆ†æï¼ˆInstrumentï¼‰&lt;/h3&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ä¼˜ç‚¹&lt;/code&gt;ï¼šçœŸæ­£è¿è¡Œèµ·æ¥çš„ç¨‹åºï¼Œå¹¶ä¸”å¯ä»¥å¯¹æŸä¸€ä¸ªæ“ä½œæ¥å…·ä½“åˆ†æï¼Œå½“ç”¨æˆ·åšäº†æŸä¸€ä¸ªæ“ä½œæ—¶ï¼Œè¯¥æ“ä½œæ˜¯å¦äº§ç”Ÿäº†å†…å­˜æ³„éœ²ï¼ˆåˆ†å‚å‡†ç¡®ï¼Œå¦‚æœæç¤ºæœ‰å†…å­˜æ³„éœ²ï¼ŒåŸºæœ¬å¯ä»¥è¯´æ˜ä»£ç æœ‰é—®é¢˜ï¼‰&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;ç¼ºç‚¹&lt;/code&gt;ï¼šåˆ†æé€Ÿåº¦éå¸¸æ…¢ï¼Œéœ€è¦ä¸€æ­¥ä¸€æ­¥æ¥åˆ†æä»£ç æ˜¯å¦æœ‰é—®é¢˜ï¼Œåˆ‡å¯èƒ½åœ¨åˆ†æè¿‡ç¨‹ä¸­æœ‰é—æ¼ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;è¿›è¡Œæ–¹å¼&lt;/code&gt;ï¼šProduct â€“&amp;gt; Profile â€“&amp;gt;Leaks â€“&amp;gt; é€‰æ‹©æƒ³è¦è¿è¡Œçš„é¡¹ç›® â€“&amp;gt; Record&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/266345-5cc73c61f7ae76c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300&quot; width=&quot;300&quot; height=&quot;200&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/266345-28c2b43923fe13da.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300&quot; width=&quot;400&quot; height=&quot;200&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/266345-48b146c5196c07d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300&quot; width=&quot;400&quot; height=&quot;200&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™æ ·å°±å¯ä»¥å¼€å§‹åŠ¨æ€æ£€æµ‹ä¸€ä¸ªé¡¹ç›®æ˜¯å¦å­˜åœ¨å†…å­˜æ³„éœ²äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šæˆ‘ä»¬éœ€è¦è¿›è¡Œæ“ä½œè®©ç³»ç»Ÿä¸æ–­å»æ‰§è¡Œæ‰€è¦æ£€æµ‹çš„ä»£ç æ˜¯å¦å­˜åœ¨å†…å­˜æ³„éœ²ã€‚&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœæœ‰å†…å­˜æ³„éœ²çš„æƒ…å†µå°±ä¼šå‡ºç°ä¸‹å›¾æƒ…å†µ&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/266345-be4e19b457a6baf9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300&quot; width=&quot;400&quot; height=&quot;200&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;è¿™é‡Œæˆ‘ä»¬åœ¨å³ä¾§ Stack Trace æ‹¦ä¸‹ç‚¹å‡»æˆ‘ä»¬æ‰€åˆ›å»ºçš„æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¸¦äººåƒçš„æ–¹æ³•ï¼Œè¿™æ ·å°±èƒ½å®šä½åˆ°æ³„éœ²çš„ä½ç½®äº†ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/266345-7fc50ba21788fbcd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300&quot; width=&quot;300&quot; height=&quot;50&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;é€‰ä¸­æŸä¸€ä¸ªæ³„éœ²ä½ç½®ï¼Œä¹‹åç‚¹å‡»å³ä¸Šè§’ Xcode çš„å›¾æ ‡ç›´æ¥å›åˆ° Xcode ä»£ç ä¸­è¿›è¡Œä¿®æ”¹ï¼Œè¿™æ ·æˆ‘ä»¬åŠ¨æ€å†…å­˜åˆ†æå°±å®Œæˆäº†&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/266345-5812ead6f94787d6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300&quot; width=&quot;300&quot; height=&quot;100&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼šæˆ‘ä»¬å¯èƒ½ä¼šçœ‹åˆ°è¿™æ ·çš„æƒ…å†µï¼Œ All Heap Allocations æ˜¯ç¨‹åºçœŸå®çš„å†…å­˜åˆ†é…æƒ…å†µï¼ŒAll Anonymous VMåˆ™æ˜¯ç³»ç»Ÿä¸ºç¨‹åºåˆ†é…çš„è™šæ‹Ÿå†…å­˜ï¼Œä¸ºçš„å°±æ˜¯å½“ç¨‹åºæœ‰éœ€è¦çš„æ—¶å€™ï¼Œèƒ½å¤ŸåŠæ—¶ä¸ºç¨‹åºæä¾›è¶³å¤Ÿçš„å†…å­˜ç©ºé—´ï¼Œè€Œä¸ä¼šç°ç”¨ç°åˆ›å»º&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/266345-34d339d54700e6a4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/300&quot; width=&quot;300&quot; height=&quot;30&quot; alt=&quot;photos&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Tue, 09 May 2017 16:08:13 +0800</pubDate>
        <link>/2017/05/iOS%E7%9A%84%E9%9D%99%E6%80%81%E4%B8%8E%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90/</link>
        <guid isPermaLink="true">/2017/05/iOS%E7%9A%84%E9%9D%99%E6%80%81%E4%B8%8E%E5%8A%A8%E6%80%81%E5%86%85%E5%AD%98%E5%88%86%E6%9E%90/</guid>
        
        <category>ä¼˜åŒ–</category>
        
        <category>å†…å­˜</category>
        
        <category>iOSçš„é™æ€ä¸åŠ¨æ€å†…å­˜åˆ†æ</category>
        
        
        <category>study</category>
        
      </item>
    
  </channel>
</rss>
